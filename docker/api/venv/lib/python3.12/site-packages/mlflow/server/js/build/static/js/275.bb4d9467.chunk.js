"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[275],{47300:function(t,e,r){r.r(e),r.d(e,{ParallelCoordinatesPlot:function(){return p},default:function(){return m}});var n=r(89555),o=r(31014),i=r(98883),l=r(38812),u=r(44520),s=(r(2340),r(70807)),a=r(36118),c=r(32039),h=r(25790),d=r(50111);const f=(t,e,r)=>{var n;const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"g"),l=document.createElementNS(o,"rect"),u=document.createElementNS(o,"text");u.innerHTML=e,u.setAttribute("fill","black"),i.classList.add(t),i.appendChild(l),i.appendChild(u),null===(n=r.parentNode)||void 0===n||n.insertBefore(i,r.nextSibling);const s=u.getBBox();l.setAttribute("x",(s.x-4).toString()),l.setAttribute("y",(s.y-4).toString()),l.setAttribute("width",(s.width+8).toString()),l.setAttribute("height",(s.height+8).toString()),l.setAttribute("fill","white")},g=t=>{const{onHover:e,onUnhover:r,selectedRunUuid:n,data:i,axesRotateThreshold:l,selectedMetrics:a,selectedParams:g,width:p,height:m,closeContextMenu:v}=t,b=(0,o.useRef)(null),y=(0,o.useRef)(),[w,M]=(0,o.useState)("");(0,o.useEffect)((()=>{w?null===e||void 0===e||e(w):null===r||void 0===r||r()}),[w,e,r]);const x=(0,o.useCallback)((()=>!1!==y.current.brushed()?y.current.brushed():y.current.data()),[]),{onHighlightChange:A}=(0,h.ZY)(),S=(0,o.useCallback)((t=>{if(!t)return void y.current.unhighlight();const e=x().filter((e=>{let{uuid:r}=e;return t===r}));e.length?y.current.highlight(e):y.current.unhighlight()}),[x]);(0,o.useEffect)((()=>A(S)),[A,S]),(0,o.useEffect)((()=>{if(!y.current)return;const t=x().filter((t=>[w,n].includes(t.uuid)));t.length?y.current.highlight(t):y.current.unhighlight()}),[w,n,x]);const E=(0,o.useCallback)((t=>{const e=[],r=x();if(0===r.length)return!1;const n=k();if(0===n.length)return!1;const o=N(t,n[0]);if(!o)return!1;const i=o;return n.forEach(((n,o)=>{H(n[i-1],n[i],t,2)&&e.push(r[o])})),[e]}),[x]),C=(0,o.useCallback)((t=>{const e=[];let r=0;const n=b.current;if(!n)return;n.querySelectorAll(".dimension").forEach((function(t){const n=t.getAttribute("transform");if(n){const o=parseFloat(n.split("(")[1].split(")")[0]);e.push(o);const{width:i}=t.getBBox();0===r&&(r=i)}}));const o=[];for(let s=0;s<e.length;s++)o.push(e[s]+r/2);let i=[];const l=E(t);let u="";if(l&&0!==l[0].length)if([i]=l,i.length>1&&(i=[i[1]]),o.some((e=>Math.abs(e-t.offsetX)<10)));else{u=i[0].uuid}M(u)}),[b,E]),k=()=>{const t=y.current.margin();return(y.current.brushed().length?y.current.brushed():y.current.data()).map((e=>y.current.compute_real_centroids(e).map((e=>[e[0]+t.left,e[1]+t.top]))))},N=(t,e)=>{const r=t.offsetX;if(e[0][0]>r)return!1;if(e[e.length-1][0]<r)return!1;for(let n=0;n<e.length;n++)if(e[n][0]>r)return n;return!1},H=(t,e,r,n)=>{const o=r.offsetX,i=r.offsetY,[l,u]=t,[s,a]=e,c=s-l,h=a-u;return Math.abs(h*o-c*i-l*a+s*u)/Math.sqrt(Math.pow(c,2)+Math.pow(h,2))<=n};return(0,o.useEffect)((()=>{if(null!==b){var t,e,r,n,o;const d=g.length+a.length,w=15,x=9,A=p/d*.8,S=p/d*.4,E=a[a.length-1],k=i.map((t=>t[E])),N=Math.min(...k.filter((t=>!isNaN(t)))),H=Math.max(...k.filter((t=>!isNaN(t)))),L=(0,s.ex)().domain([N,H]).interpolator((t=>{const e=Math.max(0,Math.min(1,t));return`rgb(\n            ${Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))},\n            ${Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))},\n            ${Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))}\n          )`})),T=b.current;var h;if(T)null===(h=T.querySelector("#wrapper svg"))||void 0===h||h.remove();T&&T.querySelectorAll("canvas").forEach((t=>t.remove()));const q=()=>{const t=Object.keys(i[0]),e=t.map((t=>i.map((e=>e[t])).filter((t=>null!==t)))).map((t=>t.every((t=>!isNaN(t)&&null!==t))?"number":"string"));return Object.fromEntries(t.map(((r,n)=>[t[n],{type:e[n]}])))};if(y.current=(0,u.A)()(b.current).width(p).height(m).data(i).dimensions(q()).alpha(.8).alphaOnBrushed(.1).hideAxis(["uuid"]).lineWidth(1).color((t=>t&&E in t&&"null"!==t[E]?L(t[E]):"#f33")).createAxes().render().reorderable().brushMode("1D-axes"),!T)return;y.current.on("brushend",(()=>{y.current.unhighlight(),v()})),null===(t=T.querySelector("#wrapper svg"))||void 0===t||t.addEventListener("mousemove",(function(t){const{offsetX:e,offsetY:r}=t;C({offsetX:e,offsetY:r})})),null===(e=T.querySelector("#wrapper svg"))||void 0===e||e.addEventListener("mouseout",(()=>{M("")})),T.querySelectorAll(".parcoords .label").forEach((t=>{const e=t.innerHTML;d>l&&t.setAttribute("transform","rotate(-30)"),t.setAttribute("y","-20"),t.setAttribute("x","20");t.getBoundingClientRect().width>A&&(t.innerHTML=(0,c.y4)(e,w),e!==t.innerHTML&&f("axis-label-tooltip",e,t))})),T.querySelectorAll(".parcoords .tick text").forEach((t=>{const e=t.innerHTML;t.getBoundingClientRect().width>S&&(t.innerHTML=(0,c.y4)(e,x),e!==t.innerHTML&&f("tick-label-tooltip",e,t))}));const B=Array.from({length:10},((t,e)=>e/9)),R=y.current.svg.append("defs").append("linearGradient").attr("id","mygrad").attr("x2","0%").attr("y1","100%").attr("y2","0%");B.forEach((t=>{R.append("stop").attr("offset",100*t+"%").style("stop-color",L(N+t*(H-N)))}));const Y=null===(r=b.current)||void 0===r||null===(n=r.querySelector("svg"))||void 0===n?void 0:n.getBoundingClientRect(),P=null===(o=b.current)||void 0===o?void 0:o.querySelector(".dimension:last-of-type");if(!P)return;const _=null===P||void 0===P?void 0:P.getBoundingClientRect(),X=null===P||void 0===P?void 0:P.getAttribute("transform");if(!X)return;const O=parseFloat(X.split("(")[1].split(")")[0]);if(Y){y.current.svg.append("rect").attr("x",O+20).attr("y",0).attr("width",20).attr("height",_.height-40).style("fill","url(#mygrad)")}}}),[i,p,m,g,a,e,l,C,b,v]),(0,d.Y)("div",{ref:b,id:"wrapper",style:{width:t.width,height:t.height},className:"parcoords"})},p=t=>{const e=(0,o.useRef)(null),{theme:r}=(0,i.a)(),{layoutHeight:u,layoutWidth:s,setContainerDiv:c}=(0,a.xN)(),[h,f]=(0,o.useState)(!0),p=(0,o.useRef)();return(0,o.useEffect)((()=>{c(e.current)}),[c]),(0,o.useEffect)((()=>{f(!0),p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{f(!1)}),300)}),[u,s]),(0,d.Y)("div",{ref:e,css:(0,n.AH)({overflow:"hidden",flex:"1",paddingTop:"20px",fontSize:0,".parcoords":{backgroundColor:r.colors.backgroundPrimary},".parcoords text.label":{fill:r.colors.textPrimary}},""),children:h?(0,d.Y)(l.PLz,{}):(0,d.Y)(g,{...t,width:s,height:u})})};var m=p}}]);
//# sourceMappingURL=275.bb4d9467.chunk.js.map