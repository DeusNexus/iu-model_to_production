"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[537],{96034:function(e,t,r){r.d(t,{V:function(){return v}});var i=r(89555),n=r(31014),s=r(98883),a=r(38812),o=r(93215);const l=e=>{let{when:t,message:r}=e;const i=n.useContext(o.jb).navigator.block;return n.useEffect((()=>{if(!t)return;return null===i||void 0===i?void 0:i((()=>window.confirm(r)))}),[r,i,t]),null};var d=r(75703),c=r(11473),u=r(88443),p=r(64912),h=r(50111);class m extends n.Component{constructor(){super(...arguments),this.state={markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab,error:null},this.converter=(0,c.OT)(),this.handleMdeValueChange=e=>{this.setState({markdown:e})},this.handleTabChange=e=>{this.setState({selectedTab:e})},this.handleSubmitClick=()=>{const{onSubmit:e}=this.props,{markdown:t}=this.state;return this.setState({confirmLoading:!0}),e?Promise.resolve(e(t)).then((()=>{this.setState({confirmLoading:!1,error:null})})).catch((e=>{this.setState({confirmLoading:!1,error:e&&e.getMessageField?e.getMessageField():this.props.intl.formatMessage({id:"SzvvXl",defaultMessage:"Failed to submit"})})})):null},this.handleCancelClick=()=>{this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab});const{onCancel:e}=this.props;e&&e()}}contentHasChanged(){return this.state.markdown!==this.props.defaultMarkdown}renderActions(){const{confirmLoading:e}=this.state;return(0,h.Y)("div",{className:"editable-note-actions",children:(0,h.FD)("div",{children:[(0,h.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_114",type:"primary",className:"editable-note-save-button",onClick:this.handleSubmitClick,disabled:!this.contentHasChanged()||e,loading:e,"data-testid":"editable-note-save-button",children:this.props.saveText}),(0,h.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_124",htmlType:"button",className:"editable-note-cancel-button",onClick:this.handleCancelClick,disabled:e,children:(0,h.Y)(u.A,{id:"17k196",defaultMessage:"Cancel"})})]})})}getSanitizedHtmlContent(){const{markdown:e}=this.state;if(e){const t=(0,c.NW)(this.converter.makeHtml(e));return(0,c.Yc)(t)}return null}render(){const{showEditor:e}=this.props,{markdown:t,selectedTab:r,error:i}=this.state,s=this.getSanitizedHtmlContent();return(0,h.Y)("div",{className:"note-view-outer-container",children:e?(0,h.FD)(n.Fragment,{children:[(0,h.Y)("div",{className:"note-view-text-area",children:(0,h.Y)(d.default,{value:t,minEditorHeight:this.props.minEditorHeight,maxEditorHeight:this.props.maxEditorHeight,minPreviewHeight:50,childProps:this.props.childProps,toolbarCommands:this.props.toolbarCommands,onChange:this.handleMdeValueChange,selectedTab:r,onTabChange:this.handleTabChange,generateMarkdownPreview:e=>Promise.resolve(this.getSanitizedHtmlContent(e)),getIcon:e=>(0,h.Y)(g,{name:e})})}),i&&(0,h.Y)(a.FcD,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_178",type:"error",message:this.props.intl.formatMessage({id:"79dD5F",defaultMessage:"There was an error submitting your note."}),description:i,closable:!0}),this.renderActions(),(0,h.Y)(l,{when:this.contentHasChanged(),message:this.props.intl.formatMessage({id:"dwTTNK",defaultMessage:"Are you sure you want to navigate away? Your pending text changes will be lost."})})]}):(0,h.Y)(f,{content:s})})}}function g(e){const{theme:t}=(0,s.a)(),{name:r}=e;return(0,h.Y)(a.paO,{position:"top",title:r,children:(0,h.Y)("span",{css:(0,i.AH)({color:t.colors.textPrimary},""),children:(0,h.Y)(d.SvgIcon,{icon:r})})})}function f(e){const{content:t}=e;return t?(0,h.Y)("div",{className:"note-view-outer-container",children:(0,h.Y)("div",{className:"note-view-text-area",children:(0,h.Y)("div",{className:"note-view-preview note-editor-preview",children:(0,h.Y)("div",{className:"note-editor-preview-content","data-testid":"note-editor-preview-content",dangerouslySetInnerHTML:{__html:e.content}})})})}):(0,h.Y)("div",{children:(0,h.Y)(u.A,{id:"PRe/8y",defaultMessage:"None"})})}m.defaultProps={defaultMarkdown:"",defaultSelectedTab:"write",showEditor:!1,saveText:(0,h.Y)(u.A,{id:"Shv28w",defaultMessage:"Save"}),confirmLoading:!1,toolbarCommands:[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]],maxEditorHeight:500,minEditorHeight:200,childProps:{}};const v=(0,p.Ay)(m)},48588:function(e,t,r){r.d(t,{L:function(){return a}});r(31014);var i=r(38812),n=r(89639),s=r(50111);function a(e){const{usesFullHeight:t,...r}=e;return(0,s.FD)(i.ffj,{css:t?o.useFullHeightLayout:o.wrapper,children:[(0,s.Y)(n.S,{css:o.fixedSpacer}),t?e.children:(0,s.Y)("div",{...r,css:o.container})]})}a.defaultProps={usesFullHeight:!1};const o={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},57596:function(e,t,r){r.d(t,{F:function(){return l}});var i=r(38812),n=r(98883),s=(r(31014),r(88443)),a=r(50111);var o={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"};const l=e=>{let{description:t,title:r,...l}=e;return(0,a.Y)("div",{css:o,...l,children:(0,a.Y)(i.SvL,{image:(0,a.Y)(n.y,{}),title:null!==r&&void 0!==r?r:(0,a.Y)(s.A,{id:"Gm77Ws",defaultMessage:"Loading artifact failed"}),description:t})})}},8220:function(e,t,r){r.d(t,{$:function(){return p},d:function(){return u}});var i=r(89555),n=r(38812),s=r(98883),a=r(88443),o=r(50111);const l=e=>{let{count:t}=e;return(0,o.Y)(o.FK,{children:new Array(t).fill("").map(((e,t)=>(0,o.Y)(n.I_K,{seed:t.toString(),label:0===t?(0,o.Y)(a.A,{id:"v+0HXI",defaultMessage:"Artifact loading"}):void 0},t)))})};var d={name:"36bnqj",styles:"display:flex;flex:1"},c={name:"82a6rk",styles:"flex:1"};const u=()=>{const{theme:e}=(0,s.a)();return(0,o.FD)("div",{css:d,children:[(0,o.Y)("div",{css:c,children:(0,o.Y)("div",{css:(0,i.AH)({margin:e.spacing.sm},""),children:(0,o.Y)(l,{count:9})})}),(0,o.Y)("div",{css:(0,i.AH)({flex:3,borderLeft:`1px solid ${e.colors.border}`},""),children:(0,o.FD)("div",{css:(0,i.AH)({margin:e.spacing.sm},""),children:[(0,o.Y)(n.oud,{css:(0,i.AH)({marginBottom:e.spacing.md},"")}),(0,o.Y)(l,{count:3}),(0,o.Y)("div",{css:(0,i.AH)({width:"75%",marginTop:e.spacing.md},""),children:(0,o.Y)(l,{count:3})})]})})]})},p=e=>{const{theme:t}=(0,s.a)();return(0,o.Y)("div",{css:(0,i.AH)({margin:t.spacing.md},""),...e,children:(0,o.Y)(l,{count:9})})}},67732:function(e,t,r){r.r(t),r.d(t,{RunPage:function(){return Ji},default:function(){return $i}});var i=r(89555),n=r(38812),s=r(98883),a=r(10811),o=r(4877),l=r.n(o),d=r(31014),c=r(48588),u=r(93215),p=r(76010),h=r(25866),m=r(53677),g=r(9133),f=r.n(g),v=r(88443),y=r(25869),x=r(64912);const Y=e=>{const t=e.split(/[./]/);return t[t.length-1]},w="mlproject",M="mlmodel",A={[w.toLowerCase()]:"yaml",[M.toLowerCase()]:"yaml"},b=new Set(["jpg","bmp","jpeg","png","gif","svg"]),_=new Set(["txt","log","err","cfg","conf","cnf","cf","ini","properties","prop","hocon","toml","yaml","yml","xml","json","js","py","py3","md","rst",w.toLowerCase(),M.toLowerCase(),"jsonnet"]),I=new Set(["html"]),C=new Set(["geojson"]),S=new Set(["pdf"]),R=new Set(["csv","tsv"]);var k=r(38566),N=r(61902),D=r.n(N),T=r(89639),F=r(87665),U=r(69708),E=r(7204),L=r(59508),H=r(50111);class P extends d.Component{constructor(){super(),this.form=void 0,this.state={visible:!1,confirmLoading:!1,modelByName:{}},this.createRegisteredModelRequestId=(0,E.yk)(),this.createModelVersionRequestId=(0,E.yk)(),this.searchModelVersionRequestId=(0,E.yk)(),this.showRegisterModal=()=>{this.setState({visible:!0})},this.hideRegisterModal=()=>{var e,t;this.setState({visible:!1}),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.resetAndClearModalForm=()=>{var e,t;this.setState({visible:!1,confirmLoading:!1}),this.form.current.resetFields(),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.handleRegistrationFailure=e=>{this.setState({confirmLoading:!1}),p.A.logErrorAndNotifyUser(e)},this.handleSearchRegisteredModels=e=>{this.props.searchRegisteredModelsApi((0,L.pc)(e),5)},this.reloadModelVersionsForCurrentRun=()=>{const{runUuid:e}=this.props;return this.props.searchModelVersionsApi({run_id:e},this.searchModelVersionRequestId)},this.handleRegisterModel=()=>{this.form.current.validateFields().then((e=>{this.setState({confirmLoading:!0});const{runUuid:t,modelPath:r}=this.props,i=e[F.BE];i===F.QN?this.props.createRegisteredModelApi(e[F.F3],this.createRegisteredModelRequestId).then((()=>this.props.createModelVersionApi(e[F.F3],r,t,[],this.createModelVersionRequestId))).then(this.resetAndClearModalForm).catch(this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(p.A.logErrorAndNotifyUser):this.props.createModelVersionApi(i,r,t,[],this.createModelVersionRequestId).then(this.resetAndClearModalForm).catch(this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(p.A.logErrorAndNotifyUser)}))},this.form=d.createRef()}componentDidMount(){this.props.searchRegisteredModelsApi()}componentDidUpdate(e,t){!1===t.visible&&!0===this.state.visible&&this.props.searchRegisteredModelsApi()}renderRegisterModelForm(){const{modelByName:e}=this.props;return(0,H.Y)(F.xH,{modelByName:e,innerRef:this.form,onSearchRegisteredModels:f().debounce(this.handleSearchRegisteredModels,300)})}renderFooter(){return[(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_242",onClick:this.hideRegisterModal,children:(0,H.Y)(v.A,{id:"iwD/Dv",defaultMessage:"Cancel"})},"back"),(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_248",type:"primary",onClick:this.handleRegisterModel,"data-test-id":"confirm-register-model",children:(0,H.Y)(v.A,{id:"wBFfWW",defaultMessage:"Register"})},"submit")]}renderHelper(e,t){const{visible:r,confirmLoading:i}=this.state,{showButton:a=!0,buttonType:o}=this.props;return(0,H.FD)("div",{className:"register-model-btn-wrapper",children:[a&&(0,H.Y)(n.paO,{title:this.props.tooltip||null,placement:"left",children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_261",className:"register-model-btn",type:o,onClick:this.showRegisterModal,disabled:e,htmlType:"button",children:(0,H.Y)(v.A,{id:"YQ+Eon",defaultMessage:"Register model"})})}),(0,H.Y)(T.M,{title:this.props.intl.formatMessage({id:"qSpgg/",defaultMessage:"Register model"}),width:540,visible:this.props.modalVisible||r,onOk:this.handleRegisterModel,okText:this.props.intl.formatMessage({id:"9W3kev",defaultMessage:"Register"}),confirmLoading:i,onCancel:this.hideRegisterModal,centered:!0,footer:this.renderFooter(),children:t})]})}render(){const{disabled:e}=this.props;return this.renderHelper(e,this.renderRegisterModelForm())}}const z={createRegisteredModelApi:U.eF,createModelVersionApi:U.Ey,searchModelVersionsApi:U.hY,searchRegisteredModelsApi:U.JK},B=(0,x.Ay)(P),K=(0,a.Ng)((e=>({modelByName:e.entities.modelByName})),z)(B);var V=r(98590),O=r(77484),j=r(46536);var q={name:"82a6rk",styles:"flex:1"};const W={imageOuterContainer:{padding:"10px",overflow:"scroll",background:"white",minHeight:"100%"},imageWrapper:{display:"inline-block"},image:{cursor:"pointer","&:hover":{boxShadow:"0 0 4px gray"}},hidden:{display:"none"}};var G=e=>{let{runUuid:t,path:r,getArtifact:i=O.xC}=e;const[s,a]=(0,d.useState)(!0),[o,l]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null);return(0,d.useEffect)((()=>{a(!0),i((0,O.To)(r,t)).then((e=>{const t=r.toLowerCase().endsWith(".svg")?{type:"image/svg+xml"}:void 0;u(URL.createObjectURL(new Blob([new Uint8Array(e)],t))),a(!1)}))}),[t,r,i]),c&&(0,H.Y)("div",{css:q,children:(0,H.FD)("div",{css:W.imageOuterContainer,children:[s&&(0,H.Y)(n.PLz,{active:!0}),(0,H.Y)("div",{css:s?W.hidden:W.imageWrapper,children:(0,H.Y)("img",{alt:r,css:W.image,src:c,onLoad:()=>a(!1),onClick:()=>l(!0)})}),(0,H.Y)("div",{css:[W.hidden,""],children:(0,H.Y)(j.b,{visible:o,onVisibleChange:l,children:(0,H.Y)(j._,{src:c})})})]})})},X=r(7315),J=r(26217),$=r(8220),Q=r(57596);class Z extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,text:void 0,path:void 0},this.fetchArtifacts=this.fetchArtifacts.bind(this)}componentDidMount(){this.fetchArtifacts()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchArtifacts()}render(){if(this.state.loading||this.state.path!==this.props.path)return(0,H.Y)($.$,{className:"artifact-text-view-loading"});if(this.state.error)return(0,H.Y)(Q.F,{className:"artifact-text-view-error"});{const e=(this.props.size||0)>102400?"text":(e=>{const t=Y(e).toLowerCase();return t in A?A[t]:t})(this.props.path),{theme:t}=this.props.designSystemThemeApi,r={fontFamily:"Source Code Pro,Menlo,monospace",fontSize:t.typography.fontSizeMd,overflow:"auto",marginTop:"0",width:"100%",height:"100%",padding:t.spacing.xs,borderColor:t.colors.borderDecorative,border:"none"},i=this.state.text?function(e,t){if("json"===e){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(r){}return t}return t}(e,this.state.text):this.state.text,n=t.isDarkMode?J.iU:J.ge;return(0,H.Y)("div",{className:"ShowArtifactPage",children:(0,H.Y)("div",{className:"text-area-border-box",children:(0,H.Y)(X.A,{language:e,style:n,customStyle:r,children:null!==i&&void 0!==i?i:""})})})}}fetchArtifacts(){var e,t;this.setState({loading:!0});const r=(0,O.To)(this.props.path,this.props.runUuid);null===(e=(t=this.props).getArtifact)||void 0===e||e.call(t,r).then((e=>{this.setState({text:e,loading:!1})})).catch((e=>{this.setState({error:e,loading:!1})})),this.setState({path:this.props.path})}}Z.defaultProps={getArtifact:O.Y0};var ee=d.memo((0,s.$)(Z)),te=r(27705);const re=d.lazy((()=>Promise.all([r.e(841),r.e(801)]).then(r.bind(r,79716)))),ie=e=>(0,H.Y)(te.g,{children:(0,H.Y)(d.Suspense,{fallback:(0,H.Y)(n.PLz,{active:!0}),children:(0,H.Y)(re,{...e})})});var ne=r(28715);class se extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,html:"",path:""},this.getBlobURL=(e,t)=>{const r=new Blob([e],{type:t});return URL.createObjectURL(r)},this.fetchArtifacts=this.fetchArtifacts.bind(this)}componentDidMount(){this.fetchArtifacts()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchArtifacts()}render(){return this.state.loading||this.state.path!==this.props.path?(0,H.Y)($.$,{className:"artifact-html-view-loading"}):this.state.error?(console.error("Unable to load HTML artifact, got error "+this.state.error),(0,H.Y)("div",{className:"artifact-html-view-error",children:"Oops we couldn't load your file because of an error."})):(0,H.Y)("div",{className:"artifact-html-view",children:(0,H.Y)(ne.A,{url:"",src:this.getBlobURL(this.state.html,"text/html"),width:"100%",height:"100%",id:"html",className:"html-iframe",display:"block",position:"relative",sandbox:"allow-scripts"})})}fetchArtifacts(){const e=(0,O.To)(this.props.path,this.props.runUuid);this.props.getArtifact(e).then((e=>{this.setState({html:e,loading:!1,path:this.props.path})})).catch((e=>{this.setState({error:e,loading:!1,path:this.props.path})}))}}se.defaultProps={getArtifact:O.Y0};var ae=se;const oe=d.lazy((()=>Promise.all([r.e(314),r.e(245)]).then(r.bind(r,97540)))),le=e=>(0,H.Y)(te.g,{children:(0,H.Y)(d.Suspense,{fallback:(0,H.Y)(n.PLz,{active:!0}),children:(0,H.Y)(oe,{...e})})}),de=d.lazy((()=>r.e(334).then(r.bind(r,73334)))),ce=e=>(0,H.Y)(te.g,{children:(0,H.Y)(d.Suspense,{fallback:(0,H.Y)(n.PLz,{active:!0}),children:(0,H.Y)(de,{...e})})});var ue=r(77948),pe=r.n(ue),he=r(92516),me=r(47664),ge=r(37616),fe=r(56412);var ve={name:"bjn8wh",styles:"position:relative"};const ye=e=>{let{code:t}=e;const{theme:r}=(0,s.a)();return(0,H.FD)("div",{css:ve,children:[(0,H.Y)(fe.i,{css:(0,i.AH)({zIndex:1,position:"absolute",top:r.spacing.xs,right:r.spacing.xs},""),showLabel:!1,copyText:t,icon:(0,H.Y)(n.TdU,{})}),(0,H.Y)(ge.z7,{language:"python",showLineNumbers:!1,style:{padding:r.spacing.sm,color:r.colors.textPrimary,backgroundColor:r.colors.backgroundSecondary,whiteSpace:"pre-wrap"},wrapLongLines:!0,children:t})]})};const{Paragraph:xe,Text:Ye,Title:we}=s.p;var Me={name:"18uqayh",styles:"margin-bottom:16px"},Ae={name:"18uqayh",styles:"margin-bottom:16px"};class be extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,inputs:void 0,outputs:void 0,flavor:void 0,loader_module:void 0,serving_input:void 0},this.fetchLoggedModelMetadata=this.fetchLoggedModelMetadata.bind(this),this.fetchServingInputExample=this.fetchServingInputExample.bind(this)}componentDidMount(){this.fetchLoggedModelMetadata()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchLoggedModelMetadata()}renderModelRegistryText(){return this.props.registeredModelLink?(0,H.Y)(H.FK,{children:(0,H.Y)(v.A,{id:"BQt0TQ",defaultMessage:"This model is also registered to the <link>model registry</link>.",values:{link:e=>(0,H.Y)("a",{href:be.getLearnModelRegistryLinkUrl(),target:"_blank",children:e})}})}):(0,H.Y)(H.FK,{children:(0,H.Y)(v.A,{id:"js4/Y8",defaultMessage:"You can also <link>register it to the model registry</link> to version control",values:{link:e=>(0,H.Y)("a",{href:be.getLearnModelRegistryLinkUrl(),target:"_blank",children:e})}})})}sparkDataFrameCodeText(e){return`import mlflow\nfrom pyspark.sql.functions import struct, col\nlogged_model = '${e}'\n\n# ${this.props.intl.formatMessage({id:"O1rYVN",defaultMessage:"Load model as a Spark UDF. Override result_type if the model does not return double values."})}\nloaded_model = mlflow.pyfunc.spark_udf(spark, model_uri=logged_model)\n\n# ${this.props.intl.formatMessage({id:"OEGyWZ",defaultMessage:"Predict on a Spark DataFrame."})}\ndf.withColumn('predictions', loaded_model(struct(*map(col, df.columns))))`}loadModelCodeText(e,t){return`import mlflow\nlogged_model = '${e}'\n\n# ${this.props.intl.formatMessage({id:"6bmLqb",defaultMessage:"Load model"})}\nloaded_model = mlflow.${t}.load_model(logged_model)\n`}pandasDataFrameCodeText(e){return`import mlflow\nlogged_model = '${e}'\n\n# ${this.props.intl.formatMessage({id:"kV2Dw/",defaultMessage:"Load model as a PyFuncModel."})}\nloaded_model = mlflow.pyfunc.load_model(logged_model)\n\n# ${this.props.intl.formatMessage({id:"IKx3DN",defaultMessage:"Predict on a Pandas DataFrame."})}\nimport pandas as pd\nloaded_model.predict(pd.DataFrame(data))`}mlflowSparkCodeText(e){return`import mlflow\nlogged_model = '${e}'\n\n# ${this.props.intl.formatMessage({id:"NFUJyk",defaultMessage:"Load model"})}\nloaded_model = mlflow.spark.load_model(logged_model)\n\n# ${this.props.intl.formatMessage({id:"ZGrkWk",defaultMessage:"Perform inference via model.transform()"})}\nloaded_model.transform(data)`}validateModelForServingText(e,t){return t?`from mlflow.models import validate_serving_input\n\nmodel_uri = '${e}'\n\n# The model is logged with an input example. MLflow converts\n# it into the serving payload format for the deployed model endpoint,\n# and saves it to 'serving_input_payload.json'\nserving_payload = """${t}"""\n\n# Validate the serving payload works on the model\nvalidate_serving_input(model_uri, serving_payload)`:`from mlflow.models import validate_serving_input\n\nmodel_uri = '${e}'\n\n# The logged model does not contain an input_example.\n# Manually generate a serving payload to verify your model prior to deployment.\nfrom mlflow.models import convert_input_example_to_serving_input\n\n# Define INPUT_EXAMPLE via assignment with your own input example to the model\n# A valid input example is a data instance suitable for pyfunc prediction\nserving_payload = convert_input_example_to_serving_input(INPUT_EXAMPLE)\n\n# Validate the serving payload works on the model\nvalidate_serving_input(model_uri, serving_payload)`}renderNonPyfuncCodeSnippet(){const{flavor:e}=this.state,{runUuid:t,path:r}=this.props,i=`runs:/${t}/${r}`;return"mleap"===e?(0,H.Y)(H.FK,{}):(0,H.FD)(H.FK,{children:[(0,H.Y)(we,{level:3,children:(0,H.Y)(v.A,{id:"2NfDVN",defaultMessage:"Load the model"})}),(0,H.Y)("div",{className:"artifact-logged-model-view-code-content",children:(0,H.FD)("div",{children:[(0,H.Y)(ye,{code:this.loadModelCodeText(i,e)}),(0,H.Y)(v.A,{id:"bHuphj",defaultMessage:"See the documents below to learn how to customize this model and deploy it for batch or real-time scoring using the pyfunc model flavor."}),(0,H.FD)("ul",{children:[(0,H.Y)("li",{children:(0,H.Y)("a",{href:me.HC,children:"API reference for the mlflow.pyfunc module"})}),(0,H.Y)("li",{children:(0,H.Y)("a",{href:me.A6,children:"Creating custom Pyfunc models"})})]})]})})]})}renderPandasDataFramePrediction(e){return(0,H.FD)("div",{css:Me,children:[(0,H.Y)(Ye,{children:(0,H.Y)(v.A,{id:"GXayIF",defaultMessage:"Predict on a Pandas DataFrame:"})}),(0,H.Y)(ye,{code:this.pandasDataFrameCodeText(e)})]})}renderServingPayload(e){return e?(0,H.FD)("div",{children:[(0,H.Y)("span",{className:"code-comment",children:"# The model is logged with an input example. MLflow converts\n# it into the serving payload format for the deployed model endpoint,\n# and saves it to 'serving_input_example.json'\n"}),"serving_payload = ",(0,H.Y)("span",{className:"code-string",children:`"""${e}"""`})]}):(0,H.FD)("div",{className:"code",children:[(0,H.Y)("span",{className:"code-comment",children:"# The logged model does not contain an input_example. \n# Manually generate a serving payload to verify your model prior to deployment.\n"}),(0,H.Y)("span",{className:"code-keyword",children:"from"})," mlflow.models ",(0,H.Y)("span",{className:"code-keyword",children:"import"})," ","convert_input_example_to_serving_input","\n\n",(0,H.Y)("span",{className:"code-comment",children:"# Define INPUT_EXAMPLE via assignment with your own input example to the model\n# A valid input example is a data instance suitable for pyfunc prediction\n"}),"serving_payload = convert_input_example_to_serving_input(INPUT_EXAMPLE)"]})}renderValidateServingInputCodeSnippet(){const{runUuid:e,path:t}=this.props,r=`runs:/${e}/${t}`;return(0,H.FD)(H.FK,{children:[(0,H.Y)(we,{level:3,children:(0,H.Y)(v.A,{id:"5B5dhT",defaultMessage:"Validate the model before deployment"})}),(0,H.Y)("div",{className:"artifact-logged-model-view-code-content",children:this.renderValidateServingInput(r,this.state.serving_input)})]})}renderPyfuncCodeSnippet(){if("mlflow.spark"===this.state.loader_module)return this.renderMlflowSparkCodeSnippet();const{runUuid:e,path:t}=this.props,r=`runs:/${e}/${t}`;return(0,H.FD)(H.FK,{children:[(0,H.Y)(we,{level:3,children:(0,H.Y)(v.A,{id:"r3/K3V",defaultMessage:"Make Predictions"})}),(0,H.FD)("div",{className:"artifact-logged-model-view-code-content",children:[this.renderPandasDataFramePrediction(r),(0,H.Y)(Ye,{children:(0,H.Y)(v.A,{id:"6xPc4W",defaultMessage:"Predict on a Spark DataFrame:"})}),(0,H.Y)(ye,{code:this.sparkDataFrameCodeText(r)})]})]})}renderMlflowSparkCodeSnippet(){const{runUuid:e,path:t}=this.props,r=`runs:/${e}/${t}`;return(0,H.FD)(H.FK,{children:[(0,H.Y)(we,{level:3,children:(0,H.Y)(v.A,{id:"r3/K3V",defaultMessage:"Make Predictions"})}),(0,H.FD)("div",{className:"artifact-logged-model-view-code-content",children:[this.renderPandasDataFramePrediction(r),(0,H.Y)(ye,{code:this.mlflowSparkCodeText(r)})]})]})}renderValidateServingInput(e,t){return(0,H.FD)("div",{css:Ae,children:[(0,H.Y)(Ye,{children:(0,H.Y)(v.A,{id:"tNySO0",defaultMessage:"Run the following code to validate model inference works on the example payload, prior to deploying it to a serving endpoint"})}),(0,H.Y)(ye,{code:this.validateModelForServingText(e,t)})]})}render(){return this.state.loading?(0,H.Y)($.$,{className:"artifact-logged-model-view-loading"}):this.state.error?(0,H.Y)(Q.F,{className:"artifact-logged-model-view-error",description:(0,H.Y)(v.A,{id:"81+fJx",defaultMessage:"Couldn't load model information due to an error."})}):(0,H.Y)("div",{className:"ShowArtifactPage",children:(0,H.FD)("div",{className:"show-artifact-logged-model-view",children:[(0,H.FD)("div",{className:"artifact-logged-model-view-header",style:{marginTop:16,marginBottom:16,marginLeft:16},children:[(0,H.Y)(we,{level:2,children:(0,H.Y)(v.A,{id:"z2Gyuw",defaultMessage:"MLflow Model"})}),"pyfunc"===this.state.flavor?(0,H.Y)(v.A,{id:"ySno61",defaultMessage:"The code snippets below demonstrate how to make predictions using the logged model."}):(0,H.Y)(v.A,{id:"25EUlg",defaultMessage:"The code snippets below demonstrate how to load the logged model."})," ",this.renderModelRegistryText()]}),(0,H.Y)("hr",{}),(0,H.FD)("div",{className:"artifact-logged-model-view-schema-table",style:{width:"45%",marginLeft:16,float:"left"},children:[(0,H.Y)(we,{level:3,children:(0,H.Y)(v.A,{id:"27oNFE",defaultMessage:"Model schema"})}),(0,H.Y)("div",{className:"content",children:(0,H.Y)(Ye,{children:(0,H.Y)(v.A,{id:"GAJL1v",defaultMessage:"Input and output schema for your model. <link>Learn more</link>",values:{link:e=>(0,H.Y)("a",{href:me.$L,target:"_blank",children:e})}})})}),(0,H.Y)("div",{style:{marginTop:12},children:(0,H.Y)(he.i,{schema:{inputs:this.state.inputs,outputs:this.state.outputs},defaultExpandAllRows:!0})})]}),(0,H.FD)("div",{className:"artifact-logged-model-view-code-group",style:{width:"50%",marginRight:16,float:"right"},children:[this.renderValidateServingInputCodeSnippet(),"pyfunc"===this.state.flavor?this.renderPyfuncCodeSnippet():this.renderNonPyfuncCodeSnippet()]})]})})}fetchLoggedModelMetadata(){const e=(0,O.To)(`${this.props.path}/${h.eh}`,this.props.runUuid);this.props.getArtifact(e).then((e=>{const t=pe().load(e);if(t.signature){const e=Array.isArray(t.signature.inputs)?t.signature.inputs:JSON.parse(t.signature.inputs||"[]"),r=Array.isArray(t.signature.outputs)?t.signature.outputs:JSON.parse(t.signature.outputs||"[]");this.setState({inputs:e,outputs:r})}else this.setState({inputs:"",outputs:""});if(t.flavors.mleap?this.setState({flavor:"mleap"}):t.flavors.python_function?this.setState({flavor:"pyfunc",loader_module:t.flavors.python_function.loader_module}):this.setState({flavor:Object.keys(t.flavors)[0]}),this.setState({loading:!1}),t.saved_input_example_info&&t.saved_input_example_info.serving_input_path){const e=(0,O.To)(`${this.props.path}/${t.saved_input_example_info.serving_input_path}`,this.props.runUuid);this.fetchServingInputExample(e)}else this.setState({serving_input:null})})).catch((e=>{this.setState({error:e,loading:!1})}))}fetchServingInputExample(e){this.props.getArtifact(e).then((e=>{this.setState({serving_input:e})})).catch((()=>{this.setState({serving_input:null})}))}}be.defaultProps={getArtifact:O.Y0},be.getLearnModelRegistryLinkUrl=()=>me.gw;var _e=(0,x.Ay)(be);var Ie=r.p+"static/media/warning.290a3b14118933547965e91ea61c5a61.svg",Ce=r(69869),Se=r(88464),Re=r(70618),ke=r(9856),Ne=r(54421),De=r(14343),Te=r(40555),Fe=r(15230);var Ue={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},Ee={name:"8k1832",styles:"position:relative;display:flex"},Le={name:"111ddn1",styles:"display:flex;justify-content:space-between;flex-shrink:0"},He={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Pe=e=>{let{data:t,onClose:r}=e;const{theme:n}=(0,s.a)(),[a,o]=(0,d.useState)(!1);return(0,g.isUndefined)(t)?null:(0,H.FD)("div",{css:(0,i.AH)({display:"flex",height:"100%",flexDirection:"row-reverse",position:"relative",borderLeft:`1px solid ${n.colors.border}`},""),children:[a&&(0,H.Y)(i.mL,{styles:Ue}),(0,H.Y)(Fe.ResizableBox,{width:200,height:void 0,axis:"x",resizeHandles:["w"],minConstraints:[200,150],maxConstraints:[500,150],onResizeStart:()=>o(!0),onResizeStop:()=>o(!1),handle:(0,H.Y)("div",{css:(0,i.AH)({width:n.spacing.xs,left:-n.spacing.xs/2,height:"100%",position:"absolute",top:0,cursor:"ew-resize","&:hover":{backgroundColor:n.colors.border,opacity:.5}},"")}),css:Ee,children:(0,H.FD)("div",{css:(0,i.AH)({padding:n.spacing.sm,overflow:"hidden",display:"flex",flexDirection:"column"},""),children:[(0,H.FD)("div",{css:Le,children:[(0,H.Y)(s.p.Title,{level:5,children:(0,H.Y)(v.A,{id:"+dGAnC",defaultMessage:"Preview"})}),(0,H.Y)(s.B,{componentId:"mlflow.run.artifact_view.preview_close",onClick:()=>r(),icon:(0,H.Y)(s.C,{})})]}),!t&&(0,H.Y)(s.p.Text,{color:"secondary",children:(0,H.Y)(v.A,{id:"kjltRf",defaultMessage:"Click a cell to preview data"})}),(0,H.Y)("div",{css:He,children:(0,H.Y)(Te.fX,{json:t})})]})})]})};var ze={name:"7zbxzd",styles:"flex:1;overflow:hidden;display:flex;flex-direction:column"},Be={name:"1pbmicl",styles:"overflow:auto;flex:1"},Ke={name:"fmgtfw",styles:".table-header-icon-container{line-height:0;}"};const Ve=e=>{let{data:t,runUuid:r}=e;const[a,o]=(0,d.useState)([]),[l,c]=(0,d.useState)(!1),u=(0,Se.A)(),{theme:m}=(0,s.a)(),f=160-2*m.spacing.sm,y=(0,d.useRef)(null),[x,Y]=(0,d.useState)({width:0,height:0});(0,d.useEffect)((()=>{if(y.current){const{width:e,height:t}=y.current.getBoundingClientRect();Y({width:e,height:t})}}),[]);const w=(0,d.useMemo)((()=>t.columns),[t]),[M,A]=(0,d.useState)([]),[b,_]=(0,d.useState)(void 0),I=(0,d.useMemo)((()=>t.data),[t]),C=(0,d.useMemo)((()=>I.length>0?w.filter(((e,t)=>{if(null!==I[0][t]&&"object"===typeof I[0][t]){const{type:e}=I[0][t];return e===h.Oe}return!1})):[]),[w,I]),S=(0,d.useMemo)((()=>{const e=1+(l?24:32);return C.length>0?Math.floor((x.height-e-48)/160):Math.floor((x.height-e-48)/e)}),[x,C,l]),[R,k]=(0,d.useState)({pageSize:1,pageIndex:0});(0,d.useEffect)((()=>{k((e=>({...e,pageSize:S})))}),[S]);const N=(0,d.useMemo)((()=>w.filter((e=>!M.includes(e))).map((e=>{const t=String(e);return C.includes(e)?{id:t,header:t,accessorKey:t,minSize:100,cell:e=>{try{const t=JSON.parse(e.getValue()),{filepath:i,compressed_filepath:n}=t,s=(0,O.To)(i,r),a=(0,O.To)(n,r);return(0,H.Y)(Ne.TV,{imageUrl:s,compressedImageUrl:a,maxImageSize:f})}catch{return p.A.logErrorAndNotifyUser("Error parsing image data in logged table's image column"),e.getValue()}}}:{id:t,header:t,accessorKey:t,minSize:100}}))),[w,f,C,r,M]),D=(0,d.useMemo)((()=>I.map((e=>{const t={};for(let r=0;r<w.length;r++){const i=e[r];t[w[r]]="string"===typeof i?i:JSON.stringify(i)}return t}))),[I,w]),T=(0,Re.N4)({columns:N,data:D,state:{pagination:R,sorting:a},onSortingChange:o,getCoreRowModel:(0,ke.HT)(),getSortedRowModel:(0,ke.h5)(),getPaginationRowModel:(0,ke.kW)(),enableColumnResizing:!0,columnResizeMode:"onChange"}),F=(0,H.Y)(n.dKS,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifact-view-components_showartifactloggedtableview.tsx_181",currentPageIndex:R.pageIndex+1,numTotal:I.length,onChange:(e,t)=>{k({pageSize:t||R.pageSize,pageIndex:e-1})},pageSize:R.pageSize});return(0,H.FD)("div",{ref:y,css:(0,i.AH)({paddingLeft:m.spacing.md,height:"100%",display:"flex",gap:m.spacing.xs,overflow:"hidden"},""),children:[(0,H.FD)("div",{css:ze,children:[(0,H.Y)("div",{css:Be,children:(0,H.FD)(n.XIK,{scrollable:!0,size:l?"small":"default",css:Ke,style:{width:T.getTotalSize()},children:[T.getHeaderGroups().map((e=>(0,H.Y)(n.Hjg,{isHeader:!0,children:e.headers.map(((e,t)=>(0,H.Y)(n.A0N,{sortable:!0,sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),style:{maxWidth:e.column.getSize()},children:(0,Re.Kv)(e.column.columnDef.header,e.getContext())},e.id)))},e.id))),T.getRowModel().rows.map((e=>(0,H.Y)(n.Hjg,{children:e.getAllCells().map((e=>(0,H.Y)(n.nA6,{css:(0,i.AH)({maxHeight:160,"&:hover":{backgroundColor:m.colors.tableBackgroundSelectedHover,cursor:"pointer"}},""),onClick:()=>{_(String(e.getValue()))},tabIndex:0,onKeyDown:t=>{let{key:r}=t;"Enter"===r&&_(String(e.getValue()))},style:{maxWidth:e.column.getSize()},children:(0,Re.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})}),(0,H.Y)("div",{css:(0,i.AH)({display:"flex",justifyContent:"flex-end",paddingBottom:m.spacing.sm,paddingTop:m.spacing.sm},""),children:F})]}),!(0,g.isUndefined)(b)&&(0,H.Y)(Pe,{data:b,onClose:()=>_(void 0)}),(0,H.FD)("div",{css:(0,i.AH)({paddingTop:m.spacing.sm,paddingRight:m.spacing.sm,display:"flex",flexDirection:"column",gap:m.spacing.xs},""),children:[(0,H.FD)(n.rId.Root,{modal:!1,children:[(0,H.Y)(n.paO,{title:u.formatMessage({id:"NzRvyj",defaultMessage:"Table settings"}),useAsLabel:!0,children:(0,H.Y)(n.rId.Trigger,{asChild:!0,"aria-label":u.formatMessage({id:"NzRvyj",defaultMessage:"Table settings"}),children:(0,H.Y)(s.B,{componentId:"mlflow.run.artifact_view.table_settings",icon:(0,H.Y)(n.L64,{})})})}),(0,H.FD)(n.rId.Content,{side:"left",children:[(0,H.Y)(n.rId.Arrow,{}),(0,H.FD)(n.rId.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifact-view-components_showartifactloggedtableview.tsx_315",checked:l,onCheckedChange:c,children:[(0,H.Y)(n.rId.ItemIndicator,{}),(0,H.Y)(v.A,{id:"odkg7W",defaultMessage:"Compact view"})]}),(0,H.Y)(n.rId.Separator,{}),(0,H.FD)(n.rId.Group,{children:[(0,H.Y)(n.rId.Label,{children:(0,H.Y)(v.A,{id:"fMf88R",defaultMessage:"Columns"})}),w.map((e=>(0,H.FD)(n.rId.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifact-view-components_showartifactloggedtableview.tsx_331",onSelect:e=>e.preventDefault(),checked:!M.includes(e),onCheckedChange:()=>{A((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},children:[(0,H.Y)(n.rId.ItemIndicator,{}),e]},e)))]})]})]}),(0,H.Y)(De.k,{onClick:()=>{_((()=>(0,g.isUndefined)(b)?"":void 0))},pressed:!(0,g.isUndefined)(b),componentId:"mlflow.run.artifact_view.preview_sidebar_toggle",icon:(0,H.Y)(n.CPw,{})})]})]})},Oe=d.memo((e=>{let{runUuid:t,path:r}=e;const[a,o]=(0,d.useState)(!0),[l,c]=(0,d.useState)(),[u,p]=(0,d.useState)(void 0),[h,m]=(0,d.useState)("");(0,d.useEffect)((()=>{o(!0);const e=(0,O.To)(r,t);(0,O.Y0)(e).then((e=>{o(!1),e&&"string"===typeof e?(m(e),c(void 0)):c(Error("Artifact is not a JSON file"))})).catch((e=>{c(e),o(!1)})),p(r)}),[r,t]);const g=(0,d.useMemo)((()=>(0,V.pt)(h)),[h]),{theme:f}=(0,s.a)(),y=e=>(0,H.Y)("div",{css:(0,i.AH)({padding:f.spacing.md},""),children:(0,H.Y)(n.SvL,{image:(0,H.Y)(s.y,{}),title:(0,H.Y)(v.A,{id:"hnhCDT",defaultMessage:"Error occurred"}),description:e})});return a||r!==u?(0,H.Y)("div",{css:(0,i.AH)({padding:f.spacing.md},""),children:(0,H.Y)(n.QvX,{lines:5})}):l?y(l.message):h?g?(0,H.Y)(Ve,{data:g,runUuid:t}):y((0,H.Y)(v.A,{id:"db+oaM",defaultMessage:"Unable to parse JSON file"})):y(null)}));class je extends d.Component{render(){if(this.props.path){const e=Y(this.props.path);let t;const{modelVersions:r}=this.props;if(r){const[i]=r.filter((t=>t.source.endsWith(`artifacts/${e}`)));if(i){const{name:e,version:r}=i;t=Ce.fM.getModelVersionPageRoute(e,r)}}if(this.props.size>50*h.PE)return $e();if(this.props.isDirectory){if(this.props.runTags&&(0,V.x1)(this.props.runTags).includes(this.props.path))return(0,H.Y)(_e,{runUuid:this.props.runUuid,path:this.props.path,artifactRootUri:this.props.artifactRootUri,registeredModelLink:t})}else{if(this.props.showArtifactLoggedTableView)return(0,H.Y)(Oe,{runUuid:this.props.runUuid,path:this.props.path});if(e){if(b.has(e.toLowerCase()))return(0,H.Y)(G,{runUuid:this.props.runUuid,path:this.props.path});if(R.has(e.toLowerCase()))return(0,H.Y)(ce,{runUuid:this.props.runUuid,path:this.props.path});if(_.has(e.toLowerCase()))return(0,H.Y)(ee,{runUuid:this.props.runUuid,path:this.props.path,size:this.props.size});if(C.has(e.toLowerCase()))return(0,H.Y)(ie,{runUuid:this.props.runUuid,path:this.props.path});if(I.has(e.toLowerCase()))return(0,H.Y)(ae,{runUuid:this.props.runUuid,path:this.props.path});if(S.has(e.toLowerCase()))return(0,H.Y)(le,{runUuid:this.props.runUuid,path:this.props.path})}}}return Ge()}}var qe={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},We={name:"173u6wr",styles:"width:64px;height:64px"};const Ge=()=>(0,H.Y)("div",{css:qe,children:(0,H.Y)(n.SvL,{image:(0,H.FD)(H.FK,{children:[(0,H.Y)("img",{alt:"Preview icon.",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABoCAYAAAAU9xXbAAAAAXNSR0IArs4c6QAADAlJREFUeAHtnQ90VmUdx/cPGIMFCvOkkcI0T5qdAtJFhgrnQAJSJytOlCGkic0594fBjDxCqQzGBuHCphUYJgQdKgsSF3LqcFBHefKIFh0dm8p/yBljc2xsfX4v977n7v2z9z733d29797nnvOc59/v9/ye5/t9/t/7bqkpPngqKirKqcYKH1TF91VI830NdQV7IKAJ6wGH/yMZfqtiamrqtsGDBz/gt3p5VZ+urq6PdnR0vGra9x1h3d3dbcXFxUfNCia7v3LlylQrBnpKtKKRAGFNWAKQZK2iJsyKRgKENWEJQJK1ipowKxoJENaEJQBJ1iq6vq2vqqoa39nZ+bjVaITwGLbzZvIMtrJ7zUgS+FuWLFlSY7edrhPGwW8EZNxot0LI5SCfoyCf0KJcFLys0gA9Jaqg5QPZ/hhh1pP6UXpUoQ/a7XUV7mQWuc1JJVwnLC0trfv8+fNm3c4wX//WjCSrzxo9yWnb9ZToFDmP9DRhHgHv1KwmzClyHulpwjwC3qlZTZhT5DzS04R5BLxTs5owp8h5pKcJ8wh4p2Y1YU6R80hPE+YR8E7NasKcIueRnibMI+CdmtWEOUXOIz1NmEfAOzXr+usV3jhb34c5rWdEvTVr1ozk/dqQiJkeJNLWjpKSkv+6adp1wkLeh/VpW9rb25+hwFl9WmgchdF5/o769XEUEVNVT4kxIfKXgCbMX3zErI0mLCZE/hJwfQ1zc9MBlK/jhvkFUtawg27XxXXC3Nx0lJeXP+g2QH4rX0+JfmMkRn00YTEA8lu2JsxvjMSoT5+vYVu3bk0/fPjwFfwAIpevW3P5iHSypQ45q1at+gEbkYb09PRDLNJvL1q06JQlXwdjINAnhEHClZAwHQKmNzQ0TMXmR6LYvQi5RyXP/BqYP6ryH6J16L6Av4cvg89Ivn4iI+CYsHXr1g3haugbAF8ACXlSPCMqspXeU68m+2p078P/kM+YN0NezeLFi4N/6qB39eTKVSassrJyGASVtbW1fR+QL4kCVyegHyD/XfxTuJPInSU+CjeauPyc6BrCY0L0M0lbIA7iXkLuEYjbGSKT1FElwpi+vglZlRGATgFcufjcjr9vxIgR+xcuXNgaC1lIGYP8JMq8Gdk5uODvwrAxCbcDmzv4QytF3IK/Fau8ZMi3RRigXQ4Ym3A3AaIVl5MAvpENxEY2D29aM+yEWa/eQ26buNra2uLm5uYZhGWEfRnf3MHOOnfu3DTIfYzR9mPsdZGXtE9MwgBqGgBuBqFRFpRaAK6KeFVfbRIYkR2U95w4OsinKb8CuzMNm4MJL2Nzc2NNTc3cgoKC00Z60nlmL47YcNmCA9TzZAbJAsinMzMzr4KoZX1FVqhxrpxep+xZXGvdgr3g/Rx1mdbS0vLq6tWrJ4bqJEs8KmGMrNWsLbIFN2X+R3guQM4vKio63h8AMQX+FdKEnI0We5dzxnuR+t1gSUuaoElGjwYzJa2gN5daEl9jnfosPX+LJa1fgmVlZWexu4CRdgeu3TAq57xdyTjSwtYweu5DkCV/ITTwAFJ9dnb2rfn5+e+baXZ9ypI/5zCbMj6JTjbuGOG9TKm7CwsLTfBtFcfI/jXlnUD497gsyh3JSKujc02G0DdsFTIAhHqMMBr/Jdq03NKuvUOHDp2mSlZ1dfXFgPtzymnErQfcQpzs/h5kmt3BGa6B9XGexY6tIKTVZWRkyE6yxVC4iA6wTc6GtgoYAEJBwgD4MtqzCVDNr5z+DRgzGQmydtl+AG8c2/BXKOcuXHokRdIvg7insfnTSPm9pXF8+Bv5X8cFtveUdQ23Let70xlIeQHCaHQqTrbu5sFVtu2306PPqDRWejrg/Qmdq+zoYTMf0pRfQjIF7mIz8rDFxjzKudMSH7DBAGFMT3fQwpvMVkLWAsj6lxm36zNqFiF7rV15Q+5hNg9XKOqksBmRHewfTT3Ir+R+M9qlsymW8H7ahg0bMmlF4AZdWiNrAmQp/y0Nea2CeoGUofIA9BA2D/eq6Igs9exmlN2Db84COa2trcqjVdWu1/IZJ06cKAa0jxsgtLF9L3NSqaamps9RzmgnuujIRkIZbM5px9goPYLuSsNuEfEnmDLfMeJBj+n6q0zXE4IJ7gSOYPsJd4q+UGoGIAe38IQrWdSbnBgEjHFO9AydsU51c3Nz1x46dOhu6v4Jyshk1N2PH9bpmK5nk77AqR07eox2uQB3lTBZw4JnMQy22qlYJBmAMneXkbJ7TcNuYC3tVSh6pvxdpOCZDuKC7Ymukrg5AtRaS/WX8gODSy1xlWDYNKSg7GhUS/mNjY33QtJ1hq1Ozmmu9nCFNrkimkbvrsDJDYK8Mc7mDLXCiSXegdVTTrMTXXTk8wDlRw7o1PlHpiL2f1ZaWiqfHIQ9yPV4LxQmkCAJGXLWYqFeRn3Nw+c84pvlrKPSBnk9wvHgSXBZrKKHrIyKWkWdgDj/MaEGexcbuh+wYVoerRxsrGcd2xktvy/S6TDK13eqdgPzfV5e3lP19fWycE/AYTf1WabGifyHhkaVAgHkMeTlFiLXrh62KqONit7K4KAs111zTRnW0Id6+wKLvH8gKy6hH1nDUqZMmSLfYMwhGLiGkl7LBzbbjTOa7QYyKj+gJ8tl7xGbSs+yNf+hTdmgGDPAF6ljlZmAveco53EzPpD9AGHSQBr8Nt73LI0dzxlNmTR68puUcT3ud5ayQoPvA3IxBH8bX+mVv/FKRW7sA7MD+k28TZgfamCgxoOESQMBcCsABHeN9OIZx48f36F6G866KAfI2xltn2KqWkrRz+D+QLiWdeY7hMchE7RD3NZDPSZxK7Ib4VGGQiv+HNW3CbaM+VQo7MzCSCth8zAcsu426jyVtekF0r5G3jGVdhijTUZc3A/2Z3I4/w0FDZfC6FhtdIDZ3CnWx114AhXQY4QZQHRDzD2EN5rtgLwv4F4DtFvNtP7yuaMczAajCvvyFiBAFv6HuK9A1ov9VQ+/2AkjTCpG7+1myrqL4E/MigLYJbidLPjVAJhtprvp808KPsOn3/uwW4Izb1JOM63Oon51btr2a9kRCZPKQloX61ARwbmEz0qaAVoxQXlj/ID0fknv64cjxVg6xibjP9NNtJS/n/CEZBxZJgZRCTMFIG0La8XnIe2AmQZxo1nX1tL7DwJsOTcOHzPz4vHpBJMp7xccKQ5SjryjC9RPRjxufVZWlny/8U48NhJdN2zTEalB9OgDe/bsGc/hOp/85RA20pAbi7+C66xHAfovhLfj9jFdvQHAMbfrxtR6Azo3475FJ7gSP/R5hSnwfjYwMrqS/rFFmKAkh2s8Xuqu28xHNMsgbT7xLJw8MhKmGy6FkSLXXfsh7V3STuHkk+5WdOTuL4ewvDeTH0Nchx9tlL+FnPwY4lf4A+IekLbG/dgmzLTERzknCd/HOrOUqeu7gJkP8D1GBnHZlEzFN9V6/BTJmh4UuBCQUflnpuAaRvUuIYrRGiKS3FFlwky4uGdsJlwN+Gu5fchjOguMMOIyxamUexpiduPq0H0egt4TG4ws8fQTgoAKsCGqF6IALaPiJcMtlw9hmDKvBfxcRor8bDYPd5tII3uG8C/xG8SR38DFr3xOF3O9E339qI0EW3gZ3zG+jLC4FK6TbuGGIkAYZB01jgrBsthMBMM6EBuBaAt+bE0t4QkCmjBPYHduVBPmHDtPNDVhnsDu3KgmzDl2nmjGva2PVWvOZ+YteyxR5XxuVKaz85R3ZL54qMs/2QVPcbMyrhPGWcv6PzD7ui3y5bJ5r9nXZSuXx3lyuLKSooKeEhUB81pcE+Y1A4r2XZ8S3VzDmA7bmYaUvjNRxEdV/LSqgqq864S5uYZxUSxfUF2q2uhEltdTYoKxpwnThCUYAglWXdfXMDc3HQmGdcTqsnEq5XOK0oiZJJLfI8v1KVE2HT0s6khcCLhOWFy108phCOgpMQyS/k1gBqodNGhQ1B8ihtbGdcLcPIeFNiYR46xRLXzQdNRu3fWUaBcpn8hpwnxChN1qaMLsIuUTOU2YT4iwWw3XNx0hB+eMOP5wi902+V6On1ENCz0Q262064SF7BJz+R7/iN3KablwBPSUGI6Jr1M0Yb6mJ7xy/wev2Hz8hVYQCwAAAABJRU5ErkJggg==",css:We}),(0,H.Y)(T.S,{size:"sm"})]}),title:(0,H.Y)(v.A,{id:"6b6fTN",defaultMessage:"Select a file to preview"}),description:(0,H.Y)(v.A,{id:"2Exf7S",defaultMessage:"Supported formats: image, text, html, pdf, geojson files"})})});var Xe={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},Je={name:"173u6wr",styles:"width:64px;height:64px"};const $e=()=>(0,H.Y)("div",{css:Xe,children:(0,H.Y)(n.SvL,{image:(0,H.FD)(H.FK,{children:[(0,H.Y)("img",{alt:"Preview icon.",src:Ie,css:Je}),(0,H.Y)(T.S,{size:"sm"})]}),title:(0,H.Y)(v.A,{id:"9y+yUQ",defaultMessage:"File is too large to preview"}),description:(0,H.Y)(v.A,{id:"8T27QL",defaultMessage:"Maximum file size for preview: 50MiB"})})});var Qe=je,Ze=r(81866),et=r(72877),tt=r(65871),rt=r(26809),it=r(90725),nt=r(34860);const st=e=>{let{data:t,onToggleTreebeard:r}=e;const{theme:i}=(0,s.a)(),n=(0,d.useMemo)((()=>at(i)),[i]);return(0,H.Y)(it.Treebeard,{data:t,onToggle:r,style:n,decorators:it.decorators})};it.decorators.Header=e=>{let t,{style:r,node:i}=e;if(i.children)t="folder";else{const e=Y(i.name);t=b.has(e)?"file-image-o":R.has(e)?"file-excel-o":_.has(e)?"file-code-o":"file-text-o"}const n=`fa fa-${t}`,s=i.children?{marginRight:"5px"}:{marginRight:"5px",marginLeft:"19px"};return(0,H.Y)("div",{style:r.base,"data-test-id":"artifact-tree-node","artifact-name":i.name,"aria-label":i.name,children:(0,H.FD)("div",{style:r.title,children:[(0,H.Y)("i",{className:n,style:s}),i.name]})})},it.decorators.Loading=e=>{let{style:t}=e;return(0,H.FD)("div",{style:t,children:[(0,H.Y)("img",{alt:"",className:"loading-spinner",src:nt}),(0,H.Y)(v.A,{id:"RlRsah",defaultMessage:"loading..."})]})};const at=e=>({tree:{base:{listStyle:"none",margin:0,padding:0,backgroundColor:e.colors.backgroundPrimary,color:e.colors.textPrimary,fontSize:e.typography.fontSizeMd,maxWidth:"500px",height:"100%",overflow:"scroll"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:e.isDarkMode?e.colors.grey700:e.colors.grey300},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-12px 0 0 -4px",height:"14px"},height:7,width:7,arrow:{fill:"#7a7a7a",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:e.colors.textPrimary},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"19px"}}}});const{Text:ot}=s.p;var lt={name:"ou8xsw",styles:"flex:0 0 auto"},dt={name:"1l0i7xs",styles:"flex:1 1;overflow:hidden"},ct={name:"i3oi5p",styles:"flex:0 1"};class ut extends d.Component{constructor(){super(...arguments),this.state={activeNodeId:void 0,toggledNodeIds:{},requestedNodeIds:new Set,viewAsTable:!0},this.onToggleTreebeard=(e,t)=>{const{id:r,loading:i}=e,n=new Set(this.state.requestedNodeIds);i&&!this.state.requestedNodeIds.has(r)&&this.props.listArtifactsApi(this.props.runUuid,r),this.setState({activeNodeId:r,toggledNodeIds:{...this.state.toggledNodeIds,[r]:t},requestedNodeIds:n})},this.getTreebeardData=e=>{const{isRoot:t}=e;if(t){if(e.children)return Object.values(e.children).map((e=>this.getTreebeardData(e)));throw Error("unreachable code.")}let r,i,n,s,a;if(e.fileInfo){const{path:t}=e.fileInfo;r=t,i=(e=>{const t=e.split("/");return t[t.length-1]})(t)}const o=this.state.toggledNodeIds[r];o&&(n=o),e.children&&(s=Object.values(e.children).map((e=>this.getTreebeardData(e)))),this.state.activeNodeId===r&&(a=!0);return{id:r,name:i,toggled:n,children:s,active:a,loading:void 0!==e.children&&!e.isLoaded}}}getExistingModelVersions(){const{modelVersionsBySource:e}=this.props;return e[p.A.normalize(this.getActiveNodeRealPath())]}renderRegisterModelButton(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state,r=this.getActiveNodeRealPath();return(0,H.Y)(K,{runUuid:e,modelPath:r,modelRelativePath:String(t),disabled:void 0===t,showButton:!0,buttonType:void 0})}renderModelVersionInfoSection(e){return(0,H.Y)(mt,{modelVersion:f().last(e)})}renderPathAndSizeInfo(){const e=k.x.findChild(this.props.artifactNode,this.state.activeNodeId),t=this.getActiveNodeRealPath();return(0,H.FD)("div",{className:"artifact-info-left",children:[(0,H.FD)("div",{className:"artifact-info-path",children:[(0,H.Y)("label",{children:(0,H.Y)(v.A,{id:"axF2gD",defaultMessage:"Full Path:"})})," ",(0,H.Y)(ot,{className:"artifact-info-text",ellipsis:!0,copyable:!0,children:t})]}),!1===e.fileInfo.is_dir?(0,H.FD)("div",{className:"artifact-info-size",children:[(0,H.Y)("label",{children:(0,H.Y)(v.A,{id:"mpHsCg",defaultMessage:"Size:"})})," ",D()(this.getActiveNodeSize())]}):null]})}renderSizeInfo(){const e=k.x.findChild(this.props.artifactNode,this.state.activeNodeId),{theme:t}=this.props.designSystemThemeApi;return(0,H.FD)("div",{style:{display:"flex",alignItems:"center",gap:t.spacing.sm,overflow:"hidden",textOverflow:"ellipsis"},children:[(0,H.Y)(s.p.Text,{bold:!0,size:"lg",ellipsis:!0,title:this.state.activeNodeId,children:this.state.activeNodeId}),!1===e.fileInfo.is_dir&&(0,H.Y)(s.p.Text,{color:"secondary",children:D()(this.getActiveNodeSize())})]})}renderPathInfo(){const e=this.getActiveNodeRealPath(),{theme:t}=this.props.designSystemThemeApi;return(0,H.FD)("div",{css:(0,i.AH)({display:"flex",overflow:"hidden",alignItems:"center",gap:t.spacing.sm},""),children:[(0,H.FD)("div",{css:(0,i.AH)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"0 auto",color:t.colors.textSecondary},""),title:e,children:[(0,H.Y)(v.A,{id:"YZDyOo",defaultMessage:"Path:"})," ",e]}),(0,H.Y)(fe.i,{css:lt,showLabel:!1,size:"small",type:"tertiary",copyText:e,icon:(0,H.Y)(n.TdU,{})})]})}onDownloadClick(e,t){window.location.href=(0,O.To)(t,e)}renderControls(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state;return(0,H.Y)("div",{style:{display:"flex",alignItems:"flex-start"},children:(0,H.FD)("div",{style:{display:"inline-flex",alignItems:"center"},children:[this.shouldShowViewAsTableCheckbox&&(0,H.Y)(n.Sc0,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_288",isChecked:this.state.viewAsTable,onChange:()=>this.setState({viewAsTable:!this.state.viewAsTable}),children:(0,H.Y)(v.A,{id:"zv4Ycc",defaultMessage:"View as table"})}),(0,H.Y)(n.paO,{arrowPointAtCenter:!0,placement:"topLeft",title:this.props.intl.formatMessage({id:"Y9ZFyN",defaultMessage:"Download artifact"}),children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_337",icon:(0,H.Y)(n.s3U,{}),onClick:()=>this.onDownloadClick(e,t)})})]})})}renderArtifactInfo(){const e=this.getExistingModelVersions();let t;t=e&&p.A.isModelRegistryEnabled()?this.renderModelVersionInfoSection(e):this.activeNodeCanBeRegistered()&&p.A.isModelRegistryEnabled()?this.renderRegisterModelButton():this.activeNodeIsDirectory()?null:this.renderControls();const{theme:r}=this.props.designSystemThemeApi;return(0,H.FD)("div",{css:(0,i.AH)({padding:`${r.spacing.xs}px ${r.spacing.sm}px ${r.spacing.sm}px ${r.spacing.md}px`,display:"flex",flexDirection:"column",gap:r.spacing.xs},""),children:[(0,H.FD)("div",{css:(0,i.AH)({whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",alignItems:"center",gap:r.spacing.md},""),children:[(0,H.Y)("div",{css:dt,children:this.renderSizeInfo()}),(0,H.Y)("div",{css:ct,children:t})]}),this.renderPathInfo()]})}getActiveNodeRealPath(){return this.state.activeNodeId?`${this.props.artifactRootUri}/${this.state.activeNodeId}`:this.props.artifactRootUri}getActiveNodeSize(){if(this.state.activeNodeId){const e=k.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.file_size||"0";return parseInt(e,10)}return 0}activeNodeIsDirectory(){if(this.state.activeNodeId){return k.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.is_dir}return!0}activeNodeCanBeRegistered(){if(this.state.activeNodeId){const e=k.x.findChild(this.props.artifactNode,this.state.activeNodeId);if(e&&e.children&&h.eh in e.children)return!0}return!1}componentDidUpdate(e,t){const{activeNodeId:r}=this.state;t.activeNodeId!==r&&this.props.handleActiveNodeChange(this.activeNodeIsDirectory())}componentDidMount(){if(this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");if(t)try{k.x.findChild(this.props.artifactNode,this.props.initialSelectedArtifactPath)}catch(e){return void console.error(e)}let r="";const i={activeNodeId:this.props.initialSelectedArtifactPath,toggledNodeIds:{}};t.forEach((e=>{r+=e,i.toggledNodeIds[r]=!0,r+="/"})),this.setArtifactState(i)}}setArtifactState(e){this.setState(e)}get shouldShowViewAsTableCheckbox(){return this.state.activeNodeId&&this.props.runTags&&(0,V.L9)(this.props.runTags).includes(this.state.activeNodeId)}render(){if(k.x.isEmpty(this.props.artifactNode))return(0,H.Y)(gt,{useAutoHeight:this.props.useAutoHeight});const{theme:e}=this.props.designSystemThemeApi;return(0,H.FD)("div",{className:"artifact-view",css:(0,i.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0,[e.responsive.mediaQueries.xs]:{overflowX:"auto"}},""),children:[(0,H.Y)("div",{style:{minWidth:"200px",maxWidth:"400px",flex:1,whiteSpace:"nowrap",borderRight:`1px solid ${e.colors.borderDecorative}`},children:(0,H.Y)(st,{data:this.getTreebeardData(this.props.artifactNode),onToggleTreebeard:this.onToggleTreebeard})}),(0,H.FD)("div",{className:"artifact-right",children:[this.state.activeNodeId?this.renderArtifactInfo():null,(0,H.Y)(Qe,{runUuid:this.props.runUuid,path:this.state.activeNodeId,isDirectory:this.activeNodeIsDirectory(),size:this.getActiveNodeSize(),runTags:this.props.runTags,artifactRootUri:this.props.artifactRootUri,modelVersions:this.props.modelVersions,showArtifactLoggedTableView:this.state.viewAsTable&&this.shouldShowViewAsTableCheckbox})]})]})}}const pt={listArtifactsApi:rt.cN},ht=(0,a.Ng)(((e,t)=>{var r;const{runUuid:i}=t,{apis:n}=e,s=(0,et.ej)(i,e),a=null!==(r=null===t||void 0===t?void 0:t.artifactRootUri)&&void 0!==r?r:(0,et.vb)(i,e),o=(0,tt.U_)(e),l=f().flatMap(o,(e=>({...e,source:p.A.normalize(e.source)})));return{artifactNode:s,artifactRootUri:a,modelVersions:o,modelVersionsBySource:f().groupBy(l,"source"),apis:n}}),pt)((0,s.$)((0,x.Ay)(ut)));function mt(e){const{modelVersion:t}=e,{name:r,version:i,status:s,status_message:a}=t;let o=Ce.fM.getModelVersionPageRoute(r,i);const l=(0,H.Y)(n.paO,{title:`${r} version ${i}`,children:(0,H.FD)(u.N_,{to:o,className:"model-version-link",target:"_blank",rel:"noreferrer",children:[(0,H.Y)("span",{className:"model-name",children:r}),(0,H.FD)("span",{children:[",\xa0v",i,"\xa0"]}),(0,H.Y)("i",{className:"fas fa-external-link-o"})]})});return(0,H.FD)("div",{className:"model-version-info",children:[(0,H.FD)("div",{className:"model-version-link-section",children:[(0,H.Y)(n.paO,{title:a||Ze.zr[s],children:(0,H.Y)("div",{children:Ze.UA[s]})}),l]}),(0,H.Y)("div",{className:"model-version-status-text",children:s===Ze.IP.READY?(0,H.Y)(d.Fragment,{children:(0,H.Y)(v.A,{id:"nVndit",defaultMessage:"Registered on {registeredDate}",values:{registeredDate:p.A.formatTimestamp(t.creation_timestamp,"yyyy/mm/dd")}})}):a||Ze.zA[s]})]})}function gt(e){let{useAutoHeight:t}=e;const{theme:r}=(0,s.a)();return(0,H.Y)("div",{css:(0,i.AH)({flex:t?1:"unset",height:t?"auto":void 0,paddingTop:r.spacing.md,display:"flex",justifyContent:"center",alignItems:"center"},""),children:(0,H.Y)(n.SvL,{image:(0,H.Y)(n.BfH,{}),title:(0,H.Y)(v.A,{id:"X3F7x3",defaultMessage:"No Artifacts Recorded"}),description:(0,H.Y)(v.A,{id:"3geT+I",defaultMessage:"Use the log artifact APIs to store file outputs from MLflow runs."})})})}var ft=r(53140);class vt extends d.Component{constructor(){super(...arguments),this.pollIntervalId=void 0,this.getFailedtoListArtifactsMsg=()=>(0,H.Y)("span",{children:(0,H.Y)(v.A,{id:"V4CsL/",defaultMessage:"Unable to list artifacts stored under {artifactUri} for the current run. Please contact your tracking server administrator to notify them of this error, which can happen when the tracking server lacks permission to list artifacts under the current run's root artifact directory.",values:{artifactUri:this.props.artifactRootUri}})}),this.state={activeNodeIsDirectory:!1,errorThrown:!1},this.searchRequestId=(0,E.yk)(),this.listArtifactRequestIds=[(0,E.yk)()].concat(this.props.initialSelectedArtifactPath?this.props.initialSelectedArtifactPath.split("/").map((e=>(0,E.yk)())):[]),this.pollModelVersionsForCurrentRun=async()=>{const{apis:e,runUuid:t}=this.props,{activeNodeIsDirectory:r}=this.state,i=e[this.searchRequestId];if(r&&(!i||!i.active))try{await this.props.searchModelVersionsApi({run_id:t},this.searchRequestId)}catch(n){if(!this.state.errorThrown){const e=`Error while fetching model version for run: ${n instanceof Error?n.toString():JSON.stringify(n)}`;p.A.logErrorAndNotifyUser(e),this.setState({errorThrown:!0})}}},this.handleActiveNodeChange=e=>{this.setState({activeNodeIsDirectory:e})},this.pollArtifactsForCurrentRun=async()=>{const{runUuid:e}=this.props;if(await this.props.listArtifactsApi(e,void 0,this.listArtifactRequestIds[0]),this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");let r="";for(let i=0;i<t.length;i++)r+=t[i],await this.props.listArtifactsApi(e,r,this.listArtifactRequestIds[i+1]),r+="/"}},this.renderErrorCondition=e=>e,this.renderArtifactView=(e,t,r)=>{if(e)return(0,H.Y)($.d,{});if(this.renderErrorCondition(t)){const e=r[0];return e&&e.error&&console.error(e.error),(0,H.Y)(Q.F,{css:(0,i.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0},""),"data-testid":"artifact-view-error",description:this.getFailedtoListArtifactsMsg()})}return(0,H.Y)(ht,{...this.props,handleActiveNodeChange:this.handleActiveNodeChange,useAutoHeight:this.props.useAutoHeight})}}componentDidMount(){p.A.isModelRegistryEnabled()&&(this.pollModelVersionsForCurrentRun(),this.pollIntervalId=setInterval(this.pollModelVersionsForCurrentRun,Ze.Gs)),this.pollArtifactsForCurrentRun()}componentDidUpdate(e){e.runUuid!==this.props.runUuid&&this.setState({errorThrown:!1})}componentWillUnmount(){p.A.isModelRegistryEnabled()&&clearInterval(this.pollIntervalId)}render(){return(0,H.Y)(ft.Ay,{requestIds:this.listArtifactRequestIds,children:this.renderArtifactView})}}const yt={listArtifactsApi:rt.cN,searchModelVersionsApi:U.hY},xt=(0,a.Ng)(((e,t)=>{var r;const{runUuid:i,location:n}=t,s=((null===n||void 0===n?void 0:n.pathname)||"").match(/\/(?:artifactPath|artifacts)\/(.+)/),a=(null===s||void 0===s?void 0:s[1])||void 0,{apis:o}=e,l=null!==(r=t.artifactRootUri)&&void 0!==r?r:(0,et.vb)(i,e);let d=a;if(!d){const e=(0,V.x1)(t.runTags);e.length>0&&(d=f().first(e))}return{artifactRootUri:l,apis:o,initialSelectedArtifactPath:d}}),yt)(vt);var Yt=(0,y.h)(xt),wt=r(53606);const Mt=e=>{let{runTags:t,artifactUri:r,runUuid:n}=e;const{theme:a}=(0,s.a)(),o=(0,wt.U)(`(min-width: ${a.responsive.breakpoints.sm}px)`);return(0,H.Y)("div",{css:(0,i.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:a.spacing.md,position:"relative"},""),children:(0,H.Y)(Yt,{runUuid:n,runTags:t,useAutoHeight:o,artifactRootUri:r})})};var At=r(79085),bt=r(58481),_t=r(91144);const It=()=>{const{"*":e}=(0,u.g)();return"model-metrics"===e?h.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?h.N3.SYSTEM_METRIC_CHARTS:(0,_t.oX)()&&"traces"===e?h.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?h.N3.ARTIFACTS:h.N3.OVERVIEW},Ct=[h.N3.ARTIFACTS,h.N3.EVALUATIONS],St=()=>{const{experimentId:e,runUuid:t}=(0,u.g)(),r=(0,u.Zp)(),i=It(),[s,a]=(0,d.useState)(Ct.includes(i));return(0,H.FD)(n.tUM,{activeKey:i,onChange:n=>{e&&t&&i!==n&&(a(Ct.includes(n)),n!==h.N3.OVERVIEW?r(bt.h.getRunPageTabRoute(e,t,n)):r(bt.h.getRunPageRoute(e,t)))},tabBarStyle:{margin:s&&"0px"},children:[(0,H.Y)(n.tUM.TabPane,{tab:(0,H.Y)(v.A,{id:"kA+QJr",defaultMessage:"Overview"})},h.N3.OVERVIEW),(0,H.Y)(n.tUM.TabPane,{tab:(0,H.Y)(v.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},h.N3.MODEL_METRIC_CHARTS),(0,H.Y)(n.tUM.TabPane,{tab:(0,H.Y)(v.A,{id:"hFlaPP",defaultMessage:"System metrics"})},h.N3.SYSTEM_METRIC_CHARTS),(0,_t.oX)()&&(0,H.Y)(n.tUM.TabPane,{tab:(0,H.Y)(v.A,{id:"s8a93+",defaultMessage:"Traces"})},h.N3.TRACES),(0,H.Y)(n.tUM.TabPane,{tab:(0,H.Y)(v.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},h.N3.ARTIFACTS)]})};var Rt=r(21317);var kt={name:"s5xdrg",styles:"display:flex;align-items:center"},Nt={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function Dt(e){let{models:t,onRegisterClick:r,experimentId:a,runUuid:o}=e;const{theme:l}=(0,s.a)(),d=(e,t)=>(0,H.FD)(n.rId.Group,{children:[(0,H.Y)(n.rId.Label,{children:e}),t.map((e=>{const t=(0,g.first)(e.registeredVersions);if(!t)return(0,H.FD)(n.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>r(e),children:[(0,H.Y)("div",{css:(0,i.AH)({marginRight:l.spacing.md},""),children:(0,g.last)(e.path.split("/"))}),(0,H.Y)(n.rId.HintColumn,{children:(0,H.Y)(u.N_,{target:"_blank",to:bt.h.getRunPageTabRoute(a,o,"artifacts/"+e.path),children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,H.Y)(s.a0,{}),children:(0,H.Y)(v.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,name:c,version:p}=t;return(0,H.Y)(u.N_,{target:"_blank",to:Tt(t),children:(0,H.FD)(n.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,H.Y)(n.rId.IconWrapper,{css:kt,children:"READY"===d?(0,H.Y)(Rt.h,{}):Ze.UA[d]}),(0,H.FD)("span",{css:(0,i.AH)({marginRight:l.spacing.md},""),children:[c,(0,H.FD)(n.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:Nt,children:["v",p]})]}),(0,H.Y)(n.rId.HintColumn,{children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,H.Y)(s.a0,{}),children:(0,H.Y)(v.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),c=t.filter((e=>e.registeredVersions.length>0)),p=t.filter((e=>!e.registeredVersions.length));return(0,H.FD)(H.FK,{children:[p.length?d("Unregistered models",p):null,p.length&&c.length?(0,H.Y)(n.rId.Separator,{}):null,c.length?d("Registered models",c):null]})}const Tt=e=>{const{name:t,version:r}=e;return Ce.fM.getModelVersionPageRoute(t,r)},Ft=e=>{let{runUuid:t,experimentId:r,runTags:o,artifactRootUri:l}=e;const{theme:c}=(0,s.a)(),h=(0,a.d4)((e=>(0,g.orderBy)(e.entities.modelVersionsByRunUuid[t]))),m=(0,d.useMemo)((()=>o?p.A.getLoggedModelsFromTags(o).map((e=>{let{artifactPath:t}=e;return t})):[]),[o]),f=(0,d.useMemo)((()=>(0,g.orderBy)(m.map((e=>({path:e,absolutePath:`${l}/${e}`,registeredVersions:(null===h||void 0===h?void 0:h.filter((t=>{let{source:r}=t;return r===`${l}/${e}`})))||[]}))),(e=>{var t;return parseInt((null===(t=e.registeredVersions[0])||void 0===t?void 0:t.version)||"0",10)}),"desc")),[m,h,l]),[y,x]=(0,d.useState)(null);if(f.length>1){const e=f.filter((e=>e.registeredVersions.length>0));return(0,H.FD)(H.FK,{children:[y&&(0,H.Y)(K,{runUuid:t,modelPath:y.absolutePath,modelRelativePath:y.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>x(null)}),(0,H.FD)(n.rId.Root,{modal:!1,children:[(0,H.Y)(n.paO,{placement:"bottom",title:(0,H.Y)(v.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:e.length,loggedCount:f.length}}),children:(0,H.Y)(n.rId.Trigger,{asChild:!0,children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,H.Y)(n.D3D,{}),children:(0,H.Y)(v.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,H.Y)(n.rId.Content,{align:"end",children:(0,H.Y)(Dt,{models:f,onRegisterClick:x,experimentId:r,runUuid:t})})]})]})}const Y=(0,g.first)(f);if(!Y)return null;const w=(0,g.first)(Y.registeredVersions);return w?(0,H.Y)(u.N_,{to:Tt(w),target:"_blank",css:(0,i.AH)({marginLeft:c.spacing.sm},""),children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,H.Y)(s.a0,{}),type:"link",children:"Model registered"})}):(0,H.Y)(K,{disabled:!1,runUuid:t,modelPath:Y.absolutePath,modelRelativePath:Y.path,showButton:!0,buttonType:"primary"})};var Ut={name:"ozd7xs",styles:"flex-shrink:0"};const Et=e=>{var t;let{hasComparedExperimentsBefore:r,comparedExperimentIds:i=[],experiment:n,runDisplayName:s,runTags:a,runParams:o,runUuid:l,handleRenameRunClick:d,handleDeleteRunClick:c,artifactRootUri:p}=e;const h=[function(){var e;return r&&i?(0,H.Y)(u.N_,{to:bt.h.getCompareExperimentsPageRoute(i),children:(0,H.Y)(v.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:i.length}})}):(0,H.Y)(u.N_,{to:bt.h.getExperimentPageRoute(null!==(e=null===n||void 0===n?void 0:n.experimentId)&&void 0!==e?e:""),"data-test-id":"experiment-runs-link",children:n.name})}()];return(0,H.FD)("div",{css:Ut,children:[(0,H.FD)(At.z,{title:(0,H.Y)("span",{"data-test-id":"runs-header",children:s}),breadcrumbs:h,children:[(0,H.Y)(At.o,{menu:[{id:"overflow-rename-button",onClick:d,itemName:(0,H.Y)(v.A,{id:"fv7vQf",defaultMessage:"Rename"})},...c?[{id:"overflow-delete-button",onClick:c,itemName:(0,H.Y)(v.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(0,H.Y)(Ft,{runUuid:l,experimentId:null!==(t=null===n||void 0===n?void 0:n.experimentId)&&void 0!==t?t:"",runTags:a,artifactRootUri:p})]}),(0,H.Y)(St,{})]})};var Lt=r(64596),Ht=r(69526),Pt=r(915),zt=r(32039),Bt=r(32614);const Kt="ChartOrder";var Vt=r(75627),Ot=r(59397);const jt=e=>{var t;let{contextData:{metricsForRun:r},hoverData:i,chartData:{metricKey:n},isHovering:s,mode:a}=e;const o=(0,Vt.bL)(i)?i.hoveredDataPoint:i;if(a===Vt.QS.MultipleTracesWithScanline&&(0,Vt.bL)(i)&&s)return(0,H.Y)(Ot.G,{hoverData:i});if(null===o||void 0===o||!o.metricEntity)return null;const{timestamp:l,step:d,value:c}=o.metricEntity,u=(null===r||void 0===r||null===(t=r[n])||void 0===t?void 0:t.length)>1,h=(0,zt.bw)(n),m=u&&h&&!(0,g.isUndefined)(l),f=u&&!h&&!(0,g.isUndefined)(d);return(0,H.FD)("div",{children:[f&&(0,H.FD)("div",{css:qt.valueField,children:[(0,H.FD)("strong",{children:[(0,H.Y)(v.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",d]}),m&&(0,H.FD)("div",{css:qt.valueField,children:[(0,H.FD)("strong",{children:[(0,H.Y)(v.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",p.A.formatTimestamp(l)]}),c&&(0,H.FD)("div",{css:qt.valueField,children:[(0,H.FD)("strong",{children:[n,":"]})," ",c]})]})},qt={valueField:{maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var Wt=r(13135),Gt=r(73724),Xt=r(36118);const Jt=e=>{let{runInfo:t,metricKey:r,metricsHistory:i,onUpdate:n,xRange:a,yRange:o}=e;const{theme:l}=(0,s.a)(),c=(0,_t.dD)(),{setTooltip:u,resetTooltip:p}=(0,Vt.uN)({metricKey:r},c?Vt.QS.MultipleTracesWithScanline:Vt.QS.Simple),h=(0,d.useMemo)((()=>{var e,n;return[{uuid:null!==(e=t.runUuid)&&void 0!==e?e:"",displayName:null!==(n=t.runName)&&void 0!==n?n:"",runInfo:t,metricsHistory:{[r]:i},color:l.colors.primary}]}),[t,i,r,l]);return(0,H.Y)(Gt.h,{metricKey:r,runsData:h,xAxisKey:(0,zt.bw)(r)?Xt.fj.TIME:Xt.fj.STEP,selectedXAxisMetricKey:"",onHover:u,onUnhover:p,useDefaultHoverBox:!1,lineSmoothness:0,xRange:a,yRange:o,onUpdate:n})};var $t=r(65243);const Qt=e=>{let{runInfo:t,metricKey:r,metricEntry:i}=e;const{theme:n}=(0,s.a)(),{setTooltip:a,resetTooltip:o}=(0,Vt.uN)({metricKey:r}),l=(0,d.useMemo)((()=>{var e,s;return i?[{uuid:null!==(e=t.runUuid)&&void 0!==e?e:"",displayName:null!==(s=t.runName)&&void 0!==s?s:"",runInfo:t,metrics:{[r]:i},color:n.colors.primary}]:[]}),[t,i,r,n]);return(0,H.Y)($t.u,{metricKey:r,runsData:l,height:260,onHover:a,onUnhover:o,useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1})};var Zt=r(52350),er=r(25121),tr=r(90765);var rr={name:"1fgcczm",styles:"cursor:grab"},ir={name:"82a6rk",styles:"flex:1"},nr={name:"ozd7xs",styles:"flex-shrink:0"};const sr=e=>{let{dragHandleRef:t,metricKey:r,canMoveUp:a,canMoveDown:o,onMoveUp:l,onMoveDown:d,onRefresh:c,isRefreshing:u=!1}=e;const{theme:p}=(0,s.a)();return(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:p.spacing.sm,justifyContent:"space-between",marginBottom:p.spacing.sm,alignItems:"center"},""),children:[(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:p.spacing.sm,alignItems:"center",overflow:"hidden"},""),children:[(0,H.Y)(n.WP0,{css:rr,ref:t}),(0,H.Y)(s.p.Title,{level:4,ellipsis:!0,withoutMargins:!0,children:r})]}),(0,H.Y)("div",{css:ir}),u&&(0,H.Y)(s.S,{label:(0,H.Y)(v.A,{id:"zMmWhy",defaultMessage:"Chart data is refreshing"})}),(0,H.FD)(n.rId.Root,{modal:!1,children:[(0,H.Y)(n.rId.Trigger,{asChild:!0,children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartheader.tsx_78",css:nr,icon:(0,H.Y)(n.ssM,{}),size:"small",title:"Chart options"})}),(0,H.FD)(n.rId.Content,{children:[(0,H.Y)(n.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartheader.tsx_87",disabled:!a,onClick:l,children:(0,H.Y)(v.A,{id:"Eh/e0j",defaultMessage:"Move up"})}),(0,H.Y)(n.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartheader.tsx_93",disabled:!o,onClick:d,children:(0,H.Y)(v.A,{id:"Sp+Iw0",defaultMessage:"Move down"})})]})]})]})};var ar=r(92206);var or={name:"1g7ixto",styles:"height:100%;display:flex;align-items:center;justify-content:center"},lr={name:"fhw977",styles:"height:300px"};const dr=e=>{var t,r;let{metricKey:o,runInfo:l,dragGroupKey:c,onReorderWith:u,canMoveUp:p,canMoveDown:h,onMoveUp:m,onMoveDown:f,chartRefreshManager:y}=e;const{dragHandleRef:x,dragPreviewRef:Y,dropTargetRef:w,isDragging:M,isOver:A}=(0,tr.S)({dragGroupKey:c,dragKey:o,onDrop:u}),b=(0,d.useMemo)((()=>(0,g.compact)([l.runUuid])),[l]),_=(0,d.useMemo)((()=>[o]),[o]),[I,C]=(0,d.useState)(void 0),{theme:S}=(0,s.a)(),[R,k]=(0,d.useState)(void 0),N=(0,a.d4)((e=>{var t,r;return null===(t=e.entities.sampledMetricsByRunUuid[null!==(r=l.runUuid)&&void 0!==r?r:""])||void 0===t?void 0:t[o]})),{elementRef:D,isInViewport:T}=(0,ar.v)(),{isLoading:F,isRefreshing:U,resultsByRunUuid:E,refresh:L}=(0,Wt.S)({runUuids:b,metricKeys:_,enabled:T,range:R,maxResults:320}),{metricsHistory:P,error:z}=(null===(t=E[null!==(r=l.runUuid)&&void 0!==r?r:""])||void 0===t?void 0:t[o])||{},B=!F&&1===(null===P||void 0===P?void 0:P.length),K=e=>k((t=>(0,g.isEqual)(t,e)?t:e)),{destroyTooltip:V}=(0,Vt.uN)({metricKey:o});(0,d.useEffect)((()=>{F&&V()}),[V,F]),(0,d.useEffect)((()=>T?y.registerRefreshCallback((()=>{L()})):()=>{}),[y,L,T]);const O=(0,d.useRef)(void 0),j=e=>{var t,r,i,n;let{layout:s}=e;!0===(null===(t=s.xaxis)||void 0===t?void 0:t.autorange)&&(C(void 0),K(void 0));const a=null===(r=s.yaxis)||void 0===r?void 0:r.range;if(O.current=a?[...a]:void 0,!1===(null===(i=s.xaxis)||void 0===i?void 0:i.autorange)&&null!==(n=s.xaxis)&&void 0!==n&&n.range)if(C([...s.xaxis.range]),(0,zt.bw)(o))K((0,er._)(N,s.xaxis.range));else{var l,d;const e=Math.floor(null===(l=s.xaxis)||void 0===l?void 0:l.range[0]),t=Math.ceil(null===(d=s.xaxis)||void 0===d?void 0:d.range[1]);K(e&&t?[e-1,t+1]:void 0)}},{resetTooltip:q}=(0,Vt.uN)({metricKey:o});return(0,H.FD)("div",{role:"figure",ref:e=>{null===Y||void 0===Y||Y(e),null===w||void 0===w||w(e)},css:(0,i.AH)({border:`1px solid ${S.colors.borderDecorative}`,borderRadius:S.general.borderRadiusBase,padding:S.spacing.md,background:S.colors.backgroundPrimary,position:"relative",overflow:"hidden"},""),children:[(0,H.FD)("div",{ref:D,onMouseLeave:q,children:[(0,H.Y)(sr,{canMoveDown:h,canMoveUp:p,dragHandleRef:x,metricKey:o,onMoveDown:f,onMoveUp:m,onRefresh:L,isRefreshing:U}),(0,H.Y)("div",{css:lr,children:(()=>{var e;return z?(0,H.Y)("div",{css:or,children:(0,H.Y)(n.SvL,{image:(0,H.Y)(s.W,{}),description:z instanceof Zt.s?z.getMessageField():null===z||void 0===z||null===(e=z.message)||void 0===e?void 0:e.toString(),title:(0,H.Y)(v.A,{id:"U7eJfk",defaultMessage:"Error while fetching chart data"})})}):F||!P?(0,H.Y)(n.PLz,{}):T?B?(0,H.Y)(Qt,{metricKey:o,metricEntry:(0,g.first)(P),runInfo:l}):(0,H.Y)(Jt,{metricKey:o,metricsHistory:P,runInfo:l,onUpdate:j,xRange:I,yRange:O.current}):null})()})]}),M&&(0,H.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,backgroundColor:S.isDarkMode?S.colors.blue800:S.colors.blue100},"")}),A&&(0,H.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,backgroundColor:S.isDarkMode?S.colors.blue800:S.colors.blue100,border:`2px dashed ${S.colors.blue400}`,opacity:.75},"")})]})};class cr{constructor(){this.refreshCallbacks=[]}registerRefreshCallback(e){return this.refreshCallbacks.push(e),()=>{this.refreshCallbacks=this.refreshCallbacks.filter((t=>t!==e))}}refreshAllCharts(){this.refreshCallbacks.forEach((e=>e()))}}const{systemMetricChartsEmpty:ur,modelMetricChartsEmpty:pr}=(0,Ht.YK)({systemMetricChartsEmpty:{id:"dQY7H0",defaultMessage:"No system metrics recorded"},modelMetricChartsEmpty:{id:"31EKoz",defaultMessage:"No model metrics recorded"}}),hr=()=>(0,H.Y)(n.SvL,{title:"No matching metric keys",description:"All metrics in this section are filtered. Clear the search filter to see hidden metrics."}),mr=e=>{let{label:t}=e;return(0,H.Y)(n.SvL,{title:t,description:null})},gr=(e,t)=>t.toLowerCase().startsWith(e.toLowerCase())||(0,zt.RZ)(t).toLowerCase().startsWith(e.toLowerCase()),fr=e=>{let{metricKeys:t,search:r,runInfo:i,chartRefreshManager:n,onReorderChart:a}=e;const{theme:o}=(0,s.a)(),l=t.filter((e=>gr(r,e))),{canMoveDown:c,canMoveUp:u,moveChartDown:p,moveChartUp:h}=((e,t)=>({canMoveDown:t=>t!==(0,g.last)(e),canMoveUp:t=>t!==(0,g.first)(e),moveChartDown:r=>{const i=e[(0,g.indexOf)(e,r)+1];t(r,i)},moveChartUp:r=>{const i=e[(0,g.indexOf)(e,r)-1];t(r,i)}}))(l,a),m=(0,d.useMemo)((()=>({...(0,Pt.A)({maxColumns:3,gap:o.spacing.lg,additionalBreakpoints:[{breakpointWidth:2160,minColumnWidthForBreakpoint:720}]}),overflow:"hidden"})),[o]);return l.length?(0,H.Y)("div",{css:m,children:l.map(((e,t)=>(0,H.Y)(dr,{dragGroupKey:"metricCharts",metricKey:e,runInfo:i,onReorderWith:a,canMoveUp:u(e),canMoveDown:c(e),onMoveDown:()=>p(e),onMoveUp:()=>h(e),chartRefreshManager:n},`${e}-${t}`)))}):(0,H.Y)(hr,{})};var vr={name:"1t91kdm",styles:"flex:1;display:flex;flex-direction:column"},yr={name:"ozd7xs",styles:"flex-shrink:0"},xr={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Yr=e=>{var t;let{runInfo:r,metricKeys:o,mode:l}=e;const c=(()=>{const[e]=(0,d.useState)((()=>new cr));return e})(),u=(0,a.d4)((e=>{var t;let{entities:i}=e;return(0,g.mapValues)(i.sampledMetricsByRunUuid[null!==(t=r.runUuid)&&void 0!==t?t:""],(e=>(0,g.compact)((0,g.values)(e).map((e=>{let{metricsHistory:t}=e;return t})).flat())))})),[p,h]=(0,d.useState)(""),{formatMessage:m}=(0,Se.A)(),{orderedMetricKeys:f,onReorderChart:y}=((e,t,r)=>{const i=(0,d.useRef)(Bt.A.getStoreForComponent(t,r)),[n,s]=(0,d.useState)((()=>{try{const e=i.current.getItem(Kt);if(e)return JSON.parse(e)}catch{return}}));return{orderedMetricKeys:(0,d.useMemo)((()=>(0,g.orderBy)(e,(e=>null!==n&&void 0!==n&&n.includes(e)?(0,g.indexOf)(n,e):Number.MAX_SAFE_INTEGER))),[n,e]),onReorderChart:(t,r)=>{const a=n?[...n]:[...e],o=(0,g.indexOf)(a,t),l=(0,g.indexOf)(a,r);[a[o],a[l]]=[a[l],a[o]],s(a),i.current.setItem(Kt,JSON.stringify(a))}}})(o,"RunView"+l,null!==(t=r.runUuid)&&void 0!==t?t:""),x=!o.length,Y=!x&&!o.some((e=>gr(p,e))),w=!x,{theme:M}=(0,s.a)(),A=!x&&!Y,b=(0,d.useMemo)((()=>({runInfo:r,metricsForRun:u})),[r,u]),_=(0,a.d4)((e=>{var t;return(0,g.values)(e.entities.sampledMetricsByRunUuid[null!==(t=r.runUuid)&&void 0!==t?t:""]).some((e=>(0,g.values)(e).some((e=>{let{refreshing:t}=e;return t}))))}));return(0,H.Y)(tr.G,{children:(0,H.FD)("div",{css:vr,children:[(0,H.FD)("div",{css:yr,children:[w&&(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,H.Y)(Lt.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetriccharts.tsx_165",role:"searchbox",prefix:(0,H.Y)(n.WIv,{}),value:p,allowClear:!0,onChange:e=>h(e.target.value),placeholder:m({id:"Xs1oJm",defaultMessage:"Search metric charts"})}),(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetriccharts.tsx_176",icon:_?(0,H.Y)(s.S,{size:"small",css:(0,i.AH)({marginRight:M.spacing.sm},"")}):(0,H.Y)(n.fNY,{}),onClick:()=>{_||c.refreshAllCharts()},children:(0,H.Y)(v.A,{id:"gDNspC",defaultMessage:"Refresh"})})]}),(0,H.Y)(T.S,{})]}),x&&(0,H.Y)(mr,{label:(0,H.Y)(v.A,{..."model"===l?pr:ur})}),Y&&(0,H.Y)(hr,{}),(0,H.Y)("div",{css:xr,children:(0,H.Y)(Vt.W,{contextData:b,component:jt,hoverOnly:!0,children:A&&(0,H.Y)(fr,{metricKeys:f,runInfo:r,search:p,onReorderChart:y,chartRefreshManager:c})})})," "]})})};var wr=r(21616),Mr=r(76758);const Ar=e=>{let{status:t}=e;const{theme:r}=(0,s.a)();return(0,H.FD)(n.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,i.AH)({backgroundColor:"FINISHED"===t?r.isDarkMode?r.colors.green800:r.colors.green100:"KILLED"===t||"FAILED"===t?r.isDarkMode?r.colors.red800:r.colors.red100:"SCHEDULED"===t||"RUNNING"===t?r.isDarkMode?r.colors.blue800:r.colors.blue100:void 0},""),children:[t&&(0,H.Y)(Mr.F,{status:t})," ",(0,H.Y)(s.p.Text,{css:(0,i.AH)({marginLeft:r.spacing.sm},""),children:"FINISHED"===t?(0,H.Y)(s.p.Text,{color:"success",children:(0,H.Y)(v.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===t?(0,H.Y)(s.p.Text,{color:"error",children:(0,H.Y)(v.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===t?(0,H.Y)(s.p.Text,{color:"error",children:(0,H.Y)(v.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===t?(0,H.Y)(s.p.Text,{color:"info",children:(0,H.Y)(v.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===t?(0,H.Y)(s.p.Text,{color:"info",children:(0,H.Y)(v.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):t})]})},br=e=>{var t;let{runInfo:r,tags:i}=e;const n=p.A.getUser(r,i);return(0,H.Y)(u.N_,{to:bt.h.searchRunsByUser(null!==(t=null===r||void 0===r?void 0:r.experimentId)&&void 0!==t?t:"",n),children:n})};const _r=e=>{let{value:t}=e;const r=(0,d.useMemo)((()=>{try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return null}}),[t]);return(0,H.Y)("div",{css:(0,i.AH)({whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:r?"monospace":void 0},""),children:r||t})};var Ir={name:"ozd7xs",styles:"flex-shrink:0"};const Cr=e=>{let{name:t,value:r,toggleExpanded:a,isExpanded:o,autoExpandedRowsList:l}=e;const{theme:c}=(0,s.a)(),u=(0,d.useRef)(null),[p,h]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{l[t]||p&&(a(),l[t]=!0)}),[l,p,t,a]),(0,d.useEffect)((()=>{if(!u.current)return;const e=(0,g.throttle)((e=>{let[t]=e;const r=t.target.scrollHeight>t.target.clientHeight;h(r)}),500,{trailing:!0}),t=new ResizeObserver(e);return t.observe(u.current),()=>t.disconnect()}),[u,a]),(0,d.useEffect)((()=>{if(u.current&&!o){u.current.scrollHeight>u.current.clientHeight&&h(!0)}}),[o]),(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:c.spacing.xs},""),children:[(p||o)&&(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_74",size:"small",icon:o?(0,H.Y)(n.D3D,{}):(0,H.Y)(s.m,{}),onClick:()=>a(),css:Ir}),(0,H.Y)("div",{title:r,css:(0,i.AH)({overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o?void 0:"3"},""),ref:u,children:o?(0,H.Y)(_r,{value:r}):r})]})};var Sr={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"},Rr={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};const kr=e=>{let{params:t,runUuid:r}=e;const{theme:a}=(0,s.a)(),o=(0,Se.A)(),[l,c]=(0,d.useState)(""),u=(0,d.useRef)({}),p=(0,d.useMemo)((()=>(0,g.values)(t)),[t]),h=(0,d.useMemo)((()=>p.filter((e=>{let{key:t,value:r}=e;const i=l.toLowerCase();return t.toLowerCase().includes(i)||r.toLowerCase().includes(i)}))),[l,p]),m=(0,d.useMemo)((()=>[{id:"key",accessorKey:"key",header:()=>(0,H.Y)(v.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,H.Y)(v.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:e=>{let{row:{original:t,getIsExpanded:r,toggleExpanded:i}}=e;return(0,H.Y)(Cr,{name:t.key,value:t.value,isExpanded:r(),toggleExpanded:i,autoExpandedRowsList:u.current})}}]),[]),f=(0,Re.N4)({data:h,getCoreRowModel:(0,ke.HT)(),getExpandedRowModel:(0,ke.D0)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:m});return(0,H.FD)("div",{css:Rr,children:[(0,H.Y)(s.p.Title,{level:4,children:(0,H.Y)(v.A,{id:"Q/evEc",defaultMessage:"Parameters ({length})",values:{length:h.length}})}),(0,H.Y)("div",{css:(0,i.AH)({padding:a.spacing.sm,border:`1px solid ${a.colors.borderDecorative}`,borderRadius:a.general.borderRadiusBase,flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},""),children:(()=>{if(!p.length)return(0,H.Y)("div",{css:Sr,children:(0,H.Y)(n.SvL,{description:(0,H.Y)(v.A,{id:"6UqPlE",defaultMessage:"No parameters recorded"})})});const e=h.length<1;return(0,H.FD)(H.FK,{children:[(0,H.Y)("div",{css:(0,i.AH)({marginBottom:a.spacing.sm},""),children:(0,H.Y)(Lt.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_213",prefix:(0,H.Y)(n.WIv,{}),placeholder:o.formatMessage({id:"SLHSXV",defaultMessage:"Search parameters"}),value:l,onChange:e=>c(e.target.value),allowClear:!0})}),(0,H.FD)(n.XIK,{scrollable:!0,empty:e?(0,H.Y)("div",{css:(0,i.AH)({marginTop:4*a.spacing.md},""),children:(0,H.Y)(n.SvL,{description:(0,H.Y)(v.A,{id:"QD6iZA",defaultMessage:"No parameters match the search filter"})})}):null,children:[(0,H.Y)(n.Hjg,{isHeader:!0,children:f.getLeafHeaders().map(((e,t)=>(0,H.Y)(n.A0N,{resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),css:(0,i.AH)({flexGrow:e.column.getCanResize()?0:1},""),style:{flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,Re.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),f.getRowModel().rows.map((e=>(0,H.Y)(n.Hjg,{children:e.getAllCells().map((e=>{var t;return(0,H.Y)(n.nA6,{css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},multiline:!0,children:(0,Re.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)))]})]})})()})]})};const{systemMetricsLabel:Nr,modelMetricsLabel:Dr}=(0,Ht.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),Tr=e=>t=>{let{key:r}=t;return r.toLowerCase().includes(e.toLowerCase())};var Fr={name:"1ff36h2",styles:"flex-grow:1"};const Ur=e=>{let{metricsList:t,runInfo:r,header:a,table:o}=e;const{theme:l}=(0,s.a)(),[{column:d}]=o.getLeafHeaders();return t.length?(0,H.FD)(H.FK,{children:[a&&(0,H.Y)(n.Hjg,{children:(0,H.Y)(n.nA6,{css:(0,i.AH)({flex:1,backgroundColor:l.colors.backgroundSecondary},""),children:(0,H.FD)(s.p.Text,{bold:!0,children:[a," (",t.length,")"]})})}),t.map((e=>{var t,i;let{key:s,value:a}=e;return(0,H.FD)(n.Hjg,{children:[(0,H.Y)(n.nA6,{style:{flexGrow:0,flexBasis:d.getSize()},children:(0,H.Y)(u.N_,{to:bt.h.getMetricPageRoute([null!==(t=r.runUuid)&&void 0!==t?t:""],s,[null!==(i=r.experimentId)&&void 0!==i?i:""]),children:s})}),(0,H.Y)(n.nA6,{css:Fr,children:a.toString()})]},s)}))]}):null};var Er={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"},Lr={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Hr={name:"ozd7xs",styles:"flex-shrink:0"};const Pr=e=>{let{latestMetrics:t,runInfo:r}=e;const{theme:a}=(0,s.a)(),o=(0,Se.A)(),[l,c]=(0,d.useState)(""),u=(0,d.useMemo)((()=>(0,g.values)(t)),[t]),p=(0,d.useMemo)((()=>[{id:"key",accessorKey:"key",header:()=>(0,H.Y)(v.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,H.Y)(v.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1}]),[]),h=(0,d.useMemo)((()=>{const e=u.filter((e=>{let{key:t}=e;return(0,zt.bw)(t)})),t=u.filter((e=>{let{key:t}=e;return!(0,zt.bw)(t)}));return e.length>0&&t.length>0?[{header:o.formatMessage(Nr),metrics:e.filter(Tr(l))},{header:o.formatMessage(Dr),metrics:t.filter(Tr(l))}]:[{header:void 0,metrics:u.filter(Tr(l))}]}),[l,u,o]),m=(0,Re.N4)({data:u,getCoreRowModel:(0,ke.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:p});return(0,H.FD)("div",{css:Lr,children:[(0,H.Y)(s.p.Title,{level:4,css:Hr,children:(0,H.Y)(v.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:u.filter(Tr(l)).length}})}),(0,H.Y)("div",{css:(0,i.AH)({padding:a.spacing.sm,border:`1px solid ${a.colors.borderDecorative}`,borderRadius:a.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!u.length)return(0,H.Y)("div",{css:Er,children:(0,H.Y)(n.SvL,{description:(0,H.Y)(v.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,g.sum)(h.map((e=>{let{metrics:t}=e;return t.length})))<1;return(0,H.FD)(H.FK,{children:[(0,H.Y)("div",{css:(0,i.AH)({marginBottom:a.spacing.sm},""),children:(0,H.Y)(Lt.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,H.Y)(n.WIv,{}),placeholder:o.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:l,onChange:e=>c(e.target.value),allowClear:!0})}),(0,H.FD)(n.XIK,{scrollable:!0,empty:e?(0,H.Y)("div",{css:(0,i.AH)({marginTop:4*a.spacing.md},""),children:(0,H.Y)(n.SvL,{description:(0,H.Y)(v.A,{id:"iTjTQt",defaultMessage:"No metrics match the search filter"})})}):null,children:[(0,H.Y)(n.Hjg,{isHeader:!0,children:m.getLeafHeaders().map((e=>(0,H.Y)(n.A0N,{resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,Re.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),h.map(((e,t)=>(0,H.Y)(Ur,{metricsList:e.metrics,runInfo:r,header:e.header,table:m},e.header||t)))]})]})})()})]})};var zr=r(38243),Br=r(85343);var Kr={name:"1flj9lk",styles:"text-align:left"},Vr={name:"ti75j2",styles:"margin:0"};const Or=e=>{let{dataset:t,onClick:r}=e;return(0,H.Y)(s.p.Link,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_16",role:"link",css:Kr,onClick:r,children:(0,H.Y)(zr.E,{datasetWithTags:t,displayTextAsLink:!0,css:Vr})})},jr=e=>{let{tags:t,runInfo:r,datasets:a}=e;const[o,l]=(0,d.useState)(null),{theme:c}=(0,s.a)(),[u,p]=(0,d.useState)(!1);if(!a||!a.length)return null;const h=a[0],m=a.slice(1),g=e=>{var i,n,s;l({datasetWithTags:e,runData:{experimentId:null!==(i=r.experimentId)&&void 0!==i?i:void 0,runUuid:null!==(n=r.runUuid)&&void 0!==n?n:"",runName:null!==(s=r.runName)&&void 0!==s?s:void 0,datasets:a,tags:t}}),p(!0)};return(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:c.spacing.sm,alignItems:"center"},""),children:[(0,H.Y)(Or,{dataset:h,onClick:()=>g(h)}),m.length?(0,H.FD)(n.rId.Root,{modal:!1,children:[(0,H.Y)(n.rId.Trigger,{asChild:!0,children:(0,H.FD)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70",size:"small",children:["+",m.length]})}),(0,H.Y)(n.rId.Content,{children:m.map((e=>(0,H.Y)(n.rId.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_81",children:(0,H.Y)(Or,{dataset:e,onClick:()=>g(e)})},e.dataset.digest)))})]}):null,o&&(0,H.Y)(Br.O,{isOpen:u,setIsOpen:p,selectedDatasetWithRun:o,setSelectedDatasetWithRun:l})]})};var qr=r(56675),Wr=r(20740);const Gr=qr.J1`
  query GetRun($data: MlflowGetRunInput!) @component(name: "MLflow.ExperimentRunTracking") {
    mlflowGetRun(input: $data) {
      apiError {
        helpUrl
        code
        message
      }
      run {
        info {
          runName
          status
          runUuid
          experimentId
          artifactUri
          endTime
          lifecycleStage
          startTime
          userId
        }
        experiment {
          experimentId
          name
          tags {
            key
            value
          }
          artifactLocation
          lifecycleStage
          lastUpdateTime
        }
        modelVersions {
          status
          version
          name
          source
        }
        data {
          metrics {
            key
            value
            step
            timestamp
          }
          params {
            key
            value
          }
          tags {
            key
            value
          }
        }
        inputs {
          datasetInputs {
            dataset {
              digest
              name
              profile
              schema
              source
              sourceType
            }
            tags {
              key
              value
            }
          }
        }
      }
    }
  }
`,Xr=e=>{var t,r;let{runUuid:i,disabled:n=!1}=e;const{data:s,loading:a,error:o,refetch:l}=(0,Wr.I)(Gr,{variables:{data:{runId:i}},skip:n});return{loading:a,data:null===s||void 0===s||null===(t=s.mlflowGetRun)||void 0===t?void 0:t.run,refetchRun:l,apolloError:o,apiError:null===s||void 0===s||null===(r=s.mlflowGetRun)||void 0===r?void 0:r.apiError}},Jr=e=>{let{parentRunUuid:t}=e;const r=(0,a.wA)(),i=(0,a.d4)((e=>{let{entities:r}=e;return r.runInfosByUuid[t]})),s=Xr({runUuid:t,disabled:!(0,_t.wD)()}),o=(0,d.useMemo)((()=>{var e;return(0,_t.wD)()?null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.info:i}),[s,i]);return(0,d.useEffect)((()=>{(0,_t.wD)()||o||r((0,rt.aO)(t))}),[r,t,o]),o?o.experimentId&&o.runUuid?(0,H.Y)(u.N_,{to:bt.h.getRunPageRoute(o.experimentId,o.runUuid),children:o.runName}):null:(0,H.Y)(n.I_K,{loading:!0,label:(0,H.Y)(v.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var $r=r(43683),Qr=r(98597);const Zr=e=>{let{runUuid:t,tags:r,onTagsUpdated:o}=e;const{theme:l}=(0,s.a)(),c=(0,a.wA)(),u=(0,Se.A)(),[p,h]=(0,d.useMemo)((()=>[(0,g.keys)(r).filter(V.oD),(0,g.values)(r).filter((e=>{let{key:t}=e;return(0,V.oD)(t)}))]),[r]),{EditTagsModal:m,showEditTagsModal:f,isLoading:y}=(0,$r.Q)({valueRequired:!0,allAvailableTags:p,saveTagsHandler:async(e,r,i)=>c((0,rt.hD)(t,r,i)).then(o)}),x=()=>{f({tags:h})},Y=u.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,H.FD)("div",{css:(0,i.AH)({paddingTop:l.spacing.xs,paddingBottom:l.spacing.xs,display:"flex",flexWrap:"wrap","> *":{marginRight:"0 !important"},gap:l.spacing.xs},""),children:[h.length<1?(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewtagsbox.tsx_67",size:"small",type:"link",onClick:x,children:(0,H.Y)(v.A,{id:"0IQod2",defaultMessage:"Add"})}):(0,H.FD)(H.FK,{children:[h.map((e=>(0,H.Y)(Qr.tj,{tag:e,enableFullViewModal:!0},`${e.key}-${e.value}`))),(0,H.Y)(n.paO,{title:Y,children:(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewtagsbox.tsx_76","aria-label":Y,size:"small",icon:(0,H.Y)(n.R2l,{}),onClick:x})})]}),y&&(0,H.Y)(s.S,{size:"small"}),m]})};var ei=r(96034),ti=r(56928);const ri=e=>{var t;let{runUuid:r,tags:o,onDescriptionChanged:l}=e;const c=(null===(t=o[ti.e])||void 0===t?void 0:t.value)||"",[u,p]=(0,d.useState)(!1),h=(0,Se.A)(),{theme:m}=(0,s.a)(),g=(0,a.wA)(),f=!c;return(0,H.FD)("div",{css:(0,i.AH)({marginBottom:m.spacing.md},""),children:[(0,H.FD)(s.p.Title,{level:4,css:(0,i.AH)({display:"flex",alignItems:"center",gap:m.spacing.xs},""),children:[(0,H.Y)(v.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,H.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":h.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>p(!0),icon:(0,H.Y)(n.R2l,{})})]}),f&&!u&&(0,H.Y)(s.p.Hint,{children:(0,H.Y)(v.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!f||u)&&(0,H.Y)(ei.V,{defaultMarkdown:c,onSubmit:e=>g((0,rt.Jv)(r,ti.e,e)).then(l).then((()=>p(!1))),onCancel:()=>p(!1),showEditor:u})]})},ii=e=>{let{title:t,value:r}=e;const{theme:n}=(0,s.a)();return(0,H.FD)("tr",{css:(0,i.AH)({display:"flex",borderBottom:`1px solid ${n.colors.borderDecorative}`,minHeight:n.general.heightSm},""),children:[(0,H.Y)("th",{css:(0,i.AH)({flex:"0 0 240px",backgroundColor:n.colors.backgroundSecondary,color:n.colors.textSecondary,padding:n.spacing.sm,display:"flex",alignItems:"flex-start"},""),children:t}),(0,H.Y)("td",{css:(0,i.AH)({flex:1,padding:n.spacing.sm,paddingTop:0,paddingBottom:0,display:"flex",alignItems:"center"},""),children:r})]})};const ni=e=>{const{name:t,version:r}=e;return Ce.fM.getModelVersionPageRoute(t,r)};var si={name:"e0dnmk",styles:"cursor:pointer"};const ai=e=>{let{registeredModels:t,runInfo:r}=e;const{theme:a}=(0,s.a)();return(0,H.Y)(n.nEg,{children:t.map((e=>(0,H.FD)(u.N_,{to:ni(e),css:(0,i.AH)({display:"flex",alignItems:"center",gap:a.spacing.sm},""),children:[(0,H.Y)(Rt.h,{})," ",e.name," ",(0,H.FD)(n.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:si,children:["v",e.version]})]},e.name)))})},oi=e=>{let{loggedModels:t,runInfo:r}=e;const{theme:a}=(0,s.a)(),{experimentId:o,runUuid:l}=r,c=e=>(0,g.first)(e)||(0,H.Y)(v.A,{id:"0HbGko",defaultMessage:"Model"}),p=(0,d.useMemo)((()=>{const e=t.map((e=>c(e.flavors)));return new Set(e).size!==e.length}),[t]);return(0,H.Y)(n.nEg,{children:t.map(((e,t)=>(0,H.FD)(u.N_,{to:bt.h.getRunPageRoute(null!==o&&void 0!==o?o:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,i.AH)({display:"flex",alignItems:"center",gap:a.spacing.sm,cursor:"pointer",height:p&&t>0?a.general.heightBase:a.general.heightSm},""),children:[(0,H.Y)(n.oiI,{}),(0,H.FD)("div",{children:[c(e.flavors),p&&t>0&&(0,H.Y)(s.p.Hint,{children:e.artifactPath})]})]},e.artifactPath)))})};var li=r(1323);var di={name:"1wcfv52",styles:"margin-right:0"},ci={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},ui={name:"9gxvqt",styles:"display:flex;gap:4px;align-items:center"},pi={name:"ou8xsw",styles:"flex:0 0 auto"},hi={name:"1wcfv52",styles:"margin-right:0"},mi={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"};const gi=e=>{var t,r,a;let{runUuid:o,tags:l,search:d}=e;const c=null===l||void 0===l||null===(t=l[h.xd])||void 0===t?void 0:t.value,u=null===l||void 0===l||null===(r=l[p.A.gitCommitTag])||void 0===r?void 0:r.value,m=p.A.renderSource(l,d,o,c),{theme:g}=(0,s.a)();return m?(0,H.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:g.spacing.sm,paddingTop:g.spacing.sm,paddingBottom:g.spacing.sm,flexWrap:"wrap"},""),children:[(0,H.Y)(li.m,{sourceType:null===(a=l[p.A.sourceTypeTag])||void 0===a?void 0:a.value,css:(0,i.AH)({color:g.colors.actionPrimaryBackgroundDefault},"")}),m," ",c&&(0,H.Y)(n.paO,{title:c,children:(0,H.Y)(n.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:di,children:(0,H.FD)("div",{css:ci,children:[(0,H.Y)(n.OKA,{})," ",c]})})}),u&&(0,H.Y)(n.paO,{dangerouslySetAntdProps:{overlayStyle:{maxWidth:"none"}},title:(0,H.FD)("div",{css:ui,children:[u,(0,H.Y)(fe.i,{css:pi,showLabel:!1,size:"small",type:"tertiary",copyText:u,icon:(0,H.Y)(n.TdU,{})})]}),children:(0,H.Y)(n.vwO,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_72",css:hi,children:(0,H.FD)("div",{css:mi,children:[(0,H.Y)(n.fSU,{})," ",u.slice(0,7)]})})})]}):(0,H.Y)(s.p.Hint,{children:"\u2014"})};var fi={name:"4zleql",styles:"display:block"};const vi=e=>{let{children:t}=e;const{theme:r}=(0,s.a)();return(0,H.Y)("table",{css:(0,i.AH)({display:"block",border:`1px solid ${r.colors.borderDecorative}`,borderBottom:"none",borderRadius:r.general.borderRadiusBase,width:"50%",minWidth:640,marginBottom:r.spacing.lg,overflow:"hidden"},""),children:(0,H.Y)("tbody",{css:fi,children:t})})},yi=e=>{let{value:t}=e;const{theme:r}=(0,s.a)();return(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:r.spacing.xs,alignItems:"center"},""),children:[t,(0,H.Y)(fe.i,{showLabel:!1,copyText:t,icon:(0,H.Y)(n.TdU,{}),size:"small"})]})};const xi=()=>(0,H.Y)(s.p.Hint,{children:"\u2014"});var Yi={name:"82a6rk",styles:"flex:1"};const wi=e=>{let{runUuid:t,onRunDataUpdated:r,tags:n,runInfo:o,datasets:l,params:c,latestMetrics:h}=e;const{theme:m}=(0,s.a)(),{search:g}=(0,u.zy)(),{registeredModels:f}=(0,a.d4)((e=>{let{entities:r}=e;return{registeredModels:r.modelVersionsByRunUuid[t]}})),y=(0,d.useMemo)((()=>p.A.getLoggedModelsFromTags(n)),[n]),x=n[wr.Ol];return(0,H.FD)("div",{css:Yi,children:[(0,H.Y)(ri,{runUuid:t,tags:n,onDescriptionChanged:r}),(0,H.Y)(s.p.Title,{level:4,children:(0,H.Y)(v.A,{id:"Isaf66",defaultMessage:"Details"})}),(()=>{var e,i,s;return(0,H.FD)(vi,{children:[(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"PP5HZf",defaultMessage:"Created at"}),value:o.startTime?p.A.formatTimestamp(o.startTime):(0,H.Y)(xi,{})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"7KKvmS",defaultMessage:"Created by"}),value:(0,H.Y)(br,{runInfo:o,tags:n})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,H.Y)(yi,{value:null!==(e=null===o||void 0===o?void 0:o.experimentId)&&void 0!==e?e:""})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"vxY1CI",defaultMessage:"Status"}),value:(0,H.Y)(Ar,{status:o.status})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,H.Y)(yi,{value:null!==(i=o.runUuid)&&void 0!==i?i:""})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"ZoIjun",defaultMessage:"Duration"}),value:p.A.getDuration(o.startTime,o.endTime)}),x&&(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,H.Y)(Jr,{parentRunUuid:x.value})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"fwp4JP",defaultMessage:"Datasets used"}),value:null!==l&&void 0!==l&&l.length?(0,H.Y)(jr,{tags:n,runInfo:o,datasets:l}):(0,H.Y)(xi,{})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"rs7Iic",defaultMessage:"Tags"}),value:(0,H.Y)(Zr,{runUuid:null!==(s=o.runUuid)&&void 0!==s?s:"",tags:n,onTagsUpdated:r})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"WmDiY9",defaultMessage:"Source"}),value:(0,H.Y)(gi,{tags:n,search:g,runUuid:t})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"mjNFJt",defaultMessage:"Logged models"}),value:(null===y||void 0===y?void 0:y.length)>0?(0,H.Y)(oi,{runInfo:o,loggedModels:y}):(0,H.Y)(xi,{})}),(0,H.Y)(ii,{title:(0,H.Y)(v.A,{id:"BCpX6U",defaultMessage:"Registered models"}),value:(null===f||void 0===f?void 0:f.length)>0?(0,H.Y)(ai,{runInfo:o,registeredModels:f}):(0,H.Y)(xi,{})})]})})(),(0,H.FD)("div",{css:(0,i.AH)({display:"flex",gap:m.spacing.lg,minHeight:360,maxHeight:760,overflow:"hidden"},""),children:[(0,H.Y)(kr,{params:c,runUuid:t}),(0,H.Y)(Pr,{latestMetrics:h,runInfo:o})]})]})},Mi=e=>(0,g.keyBy)(e,"key"),Ai=e=>null===e||void 0===e?void 0:e.map((e=>{var t,r,i,n,s,a,o,l,d,c,u,p,h,m;return{dataset:{digest:null!==(t=null===(r=e.dataset)||void 0===r?void 0:r.digest)&&void 0!==t?t:"",name:null!==(i=null===(n=e.dataset)||void 0===n?void 0:n.name)&&void 0!==i?i:"",profile:null!==(s=null===(a=e.dataset)||void 0===a?void 0:a.profile)&&void 0!==s?s:"",schema:null!==(o=null===(l=e.dataset)||void 0===l?void 0:l.schema)&&void 0!==o?o:"",source:null!==(d=null===(c=e.dataset)||void 0===c?void 0:c.source)&&void 0!==d?d:"",sourceType:null!==(u=null===(p=e.dataset)||void 0===p?void 0:p.sourceType)&&void 0!==u?u:""},tags:null!==(h=null===(m=e.tags)||void 0===m?void 0:m.map((e=>{var t,r;return{key:null!==(t=e.key)&&void 0!==t?t:"",value:null!==(r=e.value)&&void 0!==r?r:""}})).filter((e=>!(0,g.isEmpty)(e.key))))&&void 0!==h?h:[]}})),bi=e=>{var t,r,i,n,s,o;let{runUuid:l,experimentId:c}=e;const u=(0,_t.wD)(),h=(0,a.wA)();if(u){var m,f,v,y;const e=Xr({runUuid:l});(0,d.useEffect)((()=>{h((0,U.hY)({run_id:l}))}),[h,l]);const{latestMetrics:t,tags:r,params:i,datasets:n}=(0,d.useMemo)((()=>{var t,r,i,n,s,a,o,l,d,c,u,p;return{latestMetrics:(0,g.pickBy)(Mi((p=null!==(t=null===(r=e.data)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.metrics)&&void 0!==t?t:[],p.filter((e=>{let{key:t,value:r,step:i,timestamp:n}=e;return null!==t&&null!==r&&null!==i&&null!==n})).map((e=>{let{key:t,value:r,step:i,timestamp:n}=e;return{key:t,value:r,step:Number(i),timestamp:Number(n)}})))),(e=>e.key.trim().length>0)),tags:(0,g.pickBy)(Mi(null!==(n=null===(s=e.data)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.tags)&&void 0!==n?n:[]),(e=>e.key.trim().length>0)),params:(0,g.pickBy)(Mi(null!==(o=null===(l=e.data)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.params)&&void 0!==o?o:[]),(e=>e.key.trim().length>0)),datasets:Ai(null===(c=e.data)||void 0===c||null===(u=c.inputs)||void 0===u?void 0:u.datasetInputs)}}),[e.data]);return{runInfo:null!==(m=null===(f=e.data)||void 0===f?void 0:f.info)&&void 0!==m?m:void 0,experiment:null!==(v=null===(y=e.data)||void 0===y?void 0:y.experiment)&&void 0!==v?v:void 0,loading:e.loading,error:e.apolloError,apiError:e.apiError,refetchRun:e.refetchRun,datasets:n,latestMetrics:t,tags:r,params:i}}const x=((e,t)=>{const[r,i]=(0,d.useState)(""),[n,s]=(0,d.useState)(""),o=(0,a.wA)(),{runInfo:l,tags:c,latestMetrics:u,experiment:h,params:m,datasets:f}=(0,a.d4)((r=>({runInfo:r.entities.runInfosByUuid[e],tags:(0,g.pickBy)(r.entities.tagsByRunUuid[e],(e=>e.key.trim().length>0)),latestMetrics:(0,g.pickBy)(r.entities.latestMetricsByRunUuid[e],(e=>e.key.trim().length>0)),params:(0,g.pickBy)(r.entities.paramsByRunUuid[e],(e=>e.key.trim().length>0)),experiment:r.entities.experimentsById[t],datasets:r.entities.runDatasetsByUuid[e]}))),v=(0,d.useCallback)((()=>{const t=(0,rt.aO)(e);return i(t.meta.id),o(t)}),[o,e]),y=(0,d.useCallback)((()=>{const e=(0,rt.yc)(t);return s(e.meta.id),o(e)}),[o,t]),x=(0,d.useCallback)((()=>{o((0,U.hY)({run_id:e}))}),[o,e]);(0,d.useEffect)((()=>{l||v().catch((e=>p.A.logErrorAndNotifyUser(e))),x()}),[l,v,x]),(0,d.useEffect)((()=>{h||y().catch((e=>p.A.logErrorAndNotifyUser(e)))}),[h,y]);const{loading:Y,error:w}=(0,a.d4)((e=>{var t,i,n,s;return{loading:!r||Boolean(null===(t=e.apis)||void 0===t||null===(i=t[r])||void 0===i?void 0:i.active),error:null===(n=e.apis)||void 0===n||null===(s=n[r])||void 0===s?void 0:s.error}})),{loading:M,error:A}=(0,a.d4)((e=>{var t,i,s,a;return{loading:!r||Boolean(null===(t=e.apis)||void 0===t||null===(i=t[n])||void 0===i?void 0:i.active),error:null===(s=e.apis)||void 0===s||null===(a=s[n])||void 0===a?void 0:a.error}}));return{loading:Y||M,data:{runInfo:l,tags:c,params:m,latestMetrics:u,experiment:h,datasets:f},refetchRun:v,errors:{runFetchError:w,experimentFetchError:A}}})(l,c),Y=x.errors.runFetchError||x.errors.experimentFetchError;return{runInfo:null===(t=x.data)||void 0===t?void 0:t.runInfo,latestMetrics:null===(r=x.data)||void 0===r?void 0:r.latestMetrics,tags:null===(i=x.data)||void 0===i?void 0:i.tags,experiment:null===(n=x.data)||void 0===n?void 0:n.experiment,params:null===(s=x.data)||void 0===s?void 0:s.params,datasets:null===(o=x.data)||void 0===o?void 0:o.datasets,loading:x.loading,error:Y,runFetchError:x.errors.runFetchError,experimentFetchError:x.errors.experimentFetchError,refetchRun:x.refetchRun}};var _i=r(82214);class Ii extends d.Component{render(){return(0,H.Y)(_i.E,{statusCode:404,subMessage:`Run ID ${this.props.runId} does not exist`,fallbackHomePageReactRoute:bt.h.rootRoute})}}var Ci=r(64558),Si=r(33946),Ri=r(30152),ki=r(39040),Ni=r(36792),Di=r(62758),Ti=r(63617),Fi=r(4972),Ui=r(55999),Ei=r(688),Li=r(71932),Hi=r(40029);var Pi={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},zi={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Bi=e=>{var t;let{runInfo:r,metricKeys:o,mode:l,chartUIState:c,updateChartsUIState:u,latestMetrics:p={},params:m={},tags:f={}}=e;const{theme:v}=(0,s.a)(),[y,x]=(0,d.useState)(""),{formatMessage:Y}=(0,Se.A)(),{compareRunCharts:w,compareRunSections:M,chartsSearchFilter:A}=c,b=(0,d.useMemo)((()=>{var e;return(0,_t.hX)()?null!==(e=null===w||void 0===w?void 0:w.filter((e=>!e.deleted)))&&void 0!==e?e:[]:w}),[w]),[_,I]=(0,d.useState)(void 0),C=(0,a.d4)((e=>{var t;let{entities:i}=e;return(0,g.mapValues)(i.sampledMetricsByRunUuid[null!==(t=r.runUuid)&&void 0!==t?t:""],(e=>(0,g.compact)((0,g.values)(e).map((e=>{let{metricsHistory:t}=e;return t})).flat())))})),S=(0,d.useMemo)((()=>({runInfo:r,metricsForRun:C})),[r,C]),{imagesByRunUuid:R}=(0,a.d4)((e=>({imagesByRunUuid:e.entities.imagesByRunUuid}))),[k,N]=(0,d.useState)(null),D=(0,Di.iO)(),T=(0,Di.cA)(),F=(0,Di.KP)(),U=(0,Di.Ez)(),E=(0,d.useMemo)((()=>{var e,t,i;return[{displayName:null!==(e=r.runName)&&void 0!==e?e:"",metrics:p,params:m,tags:f,images:R[null!==(t=r.runUuid)&&void 0!==t?t:""]||{},metricHistory:{},uuid:null!==(i=r.runUuid)&&void 0!==i?i:"",color:v.colors.primary,runInfo:r}]}),[r,p,m,f,R,v]);(0,d.useEffect)((()=>{if((!M||!w)&&E.length>0){const{resultChartSet:e,resultSectionSet:t}=Ri.i$.getBaseChartAndSectionConfigs({runsData:E,enabledSectionNames:["model"===l?h.NN:h.rx],filterMetricNames:e=>{const t=e.startsWith(h.qt);return"model"===l?!t:t}});u((r=>({...r,compareRunCharts:e,compareRunSections:t})))}}),[w,M,E,l,u]),(0,d.useEffect)((()=>{u((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:r,isResultUpdated:i}=Ri.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:E,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const t=e.startsWith(h.qt);return"model"===l?!t:t}});return i?{...e,compareRunCharts:t,compareRunSections:r}:e}))}),[E,u,l]);const L=(0,Fi.$)(),P=c.autoRefreshEnabled&&(0,_t.vC)()&&L;(0,Ui.L)({runUuids:[null!==(t=r.runUuid)&&void 0!==t?t:""],runUuidsIsActive:["RUNNING"===r.status],autoRefreshEnabled:P,enabled:(0,_t.HW)()});const z=(0,_t.l)()?null!==A&&void 0!==A?A:"":y;return(0,H.FD)("div",{css:Pi,children:[(0,H.FD)("div",{css:(0,i.AH)({paddingBottom:v.spacing.md,display:"flex",gap:v.spacing.sm,flex:"0 0 auto"},""),children:[(0,_t.l)()?(0,H.Y)(Hi.I,{chartsSearchFilter:A}):(0,H.Y)(Lt.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_230",role:"searchbox",prefix:(0,H.Y)(n.WIv,{}),value:y,allowClear:!0,onChange:e=>x(e.target.value),placeholder:Y({id:"Xs1oJm",defaultMessage:"Search metric charts"})}),(0,_t.vC)()&&(0,H.Y)(n.ffE,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:c.autoRefreshEnabled,onPressedChange:e=>{u((t=>({...t,autoRefreshEnabled:e})))},children:Y({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,_t.qZ)()&&(0,H.Y)(Ei.f,{metricKeyList:o,globalLineChartConfig:c.globalLineChartConfig,updateUIState:u})]}),(0,H.Y)("div",{css:zi,children:(0,H.Y)(Vt.W,{contextData:S,component:jt,children:(0,H.Y)(Li.c_,{visibleChartCards:b,children:(0,H.Y)(ki.J,{compareRunSections:M,compareRunCharts:b,reorderCharts:D,insertCharts:T,chartData:E,startEditChart:e=>N(e),removeChart:F,addNewChartCard:e=>t=>N(Ri.i$.getEmptyChartCardByType(t,!1,void 0,e)),search:z,supportedChartTypes:[Ri.zL.LINE,Ri.zL.BAR,Ri.zL.IMAGE],setFullScreenChart:I,autoRefreshEnabled:P,globalLineChartConfig:c.globalLineChartConfig,groupBy:null})})})}),k&&(0,H.Y)(Ni.z,{chartRunData:E,metricKeyList:o,paramKeyList:[],config:k,onSubmit:e=>{U(e),N(null)},onCancel:()=>N(null),groupBy:null,supportedChartTypes:[Ri.zL.LINE,Ri.zL.BAR,Ri.zL.IMAGE],globalLineChartConfig:c.globalLineChartConfig}),(0,H.Y)(Ti._,{fullScreenChart:_,onCancel:()=>I(void 0),chartData:E,tooltipContextValue:S,tooltipComponent:jt,autoRefreshEnabled:P,groupBy:null})]})},Ki=e=>{const t=`${e.runInfo.runUuid}-${e.mode}`,r=(0,d.useMemo)((()=>Bt.A.getStoreForComponent("RunPage",t)),[t]),[i,n]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,_t.vC)(),globalLineChartConfig:{xAxisKey:Xt.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const t=r.getItem("chartUIState");return t?JSON.parse(t):e}catch{return e}}));return(0,d.useEffect)((()=>{r.setItem("chartUIState",JSON.stringify(i))}),[i,r]),(0,H.Y)(Di.oB,{updateChartsUIState:n,children:(0,H.Y)(Bi,{...e,chartUIState:i,updateChartsUIState:n})})};var Vi=r(47245);const Oi=[r(80171).se.runName];var ji={name:"fxp7t8",styles:"flex:1;min-width:0"};const qi=e=>{let{experimentId:t,runUuid:r}=e;const i=(0,d.useMemo)((()=>[t]),[t]);return(0,H.Y)("div",{css:ji,children:(0,H.Y)(Vi.O,{experimentIds:i,runUuid:r,disabledColumns:Oi})})};var Wi=r(55003);const Gi=e=>{if(e)return e instanceof Wi.K&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.toString())).join(", "):"message"in e?e.message:e.toString()},Xi=()=>(0,H.FD)(c.L,{children:[(0,H.Y)(n.oud,{loading:!0,label:(0,H.Y)(v.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,H.Y)(n.I_K,{seed:`s-${e}`},e)))]}),Ji=()=>{var e,t;const{runUuid:r,experimentId:o}=(0,u.g)(),g=(0,u.Zp)(),{theme:f}=(0,s.a)(),[y,x]=(0,d.useState)(!1),[Y,w]=(0,d.useState)(!1);l()(r,"[RunPage] Run UUID route param not provided"),l()(o,"[RunPage] Experiment ID route param not provided");const{experiment:M,error:A,latestMetrics:b,loading:_,params:I,refetchRun:C,runInfo:S,tags:R,experimentFetchError:k,runFetchError:N,apiError:D,datasets:T}=bi({experimentId:o,runUuid:r}),[F,U]=(0,d.useMemo)((()=>b?[Object.keys(b).filter((e=>!(0,zt.bw)(e))),Object.keys(b).filter((e=>(0,zt.bw)(e)))]:[[],[]]),[b]),{comparedExperimentIds:E=[],hasComparedExperimentsBefore:L=!1}=(0,a.d4)((e=>e.comparedExperiments||{})),P=It(),z=(0,wt.U)(`(min-width: ${f.responsive.breakpoints.sm}px)`),B=_&&(!S||!M);return N instanceof Zt.s&&N.getErrorCode()===me.tG.RESOURCE_DOES_NOT_EXIST||(null===D||void 0===D?void 0:D.code)===me.tG.RESOURCE_DOES_NOT_EXIST||A&&Gi(A).match(/not found$/)?(0,H.Y)(Ii,{runId:r}):k instanceof Zt.s&&k.getErrorCode()===me.tG.RESOURCE_DOES_NOT_EXIST?(0,H.Y)(Ci.A,{}):N||k?null:(0,_t.wD)()&&(A||D)?(0,H.Y)("div",{css:(0,i.AH)({marginTop:f.spacing.lg},""),children:(0,H.Y)(n.SvL,{title:(0,H.Y)(v.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:Gi(null!==D&&void 0!==D?D:A),image:(0,H.Y)(s.y,{})})}):!B&&S&&M?(0,H.FD)(H.FK,{children:[(0,H.FD)(c.L,{usesFullHeight:z,children:[(0,H.Y)(Et,{comparedExperimentIds:E,experiment:M,handleRenameRunClick:()=>x(!0),handleDeleteRunClick:()=>w(!0),hasComparedExperimentsBefore:L,runDisplayName:p.A.getRunDisplayName(S,r),runTags:R,runParams:I,runUuid:r,artifactRootUri:null!==(e=null===S||void 0===S?void 0:S.artifactUri)&&void 0!==e?e:void 0}),(0,H.Y)("div",{css:(0,i.AH)({flex:1,overflow:"auto",marginBottom:f.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!S)return null;switch(P){case h.N3.MODEL_METRIC_CHARTS:return(0,_t.b2)()?(0,H.Y)(Ki,{mode:"model",metricKeys:F,runInfo:S,latestMetrics:b,tags:R,params:I},"model"):(0,H.Y)(Yr,{mode:"model",metricKeys:F,runInfo:S});case h.N3.SYSTEM_METRIC_CHARTS:return(0,_t.b2)()?(0,H.Y)(Ki,{mode:"system",metricKeys:U,runInfo:S,latestMetrics:b,tags:R,params:I},"system"):(0,H.Y)(Yr,{mode:"system",metricKeys:U,runInfo:S});case h.N3.ARTIFACTS:return(0,H.Y)(Mt,{runUuid:r,runTags:R,experimentId:o,artifactUri:null!==(e=S.artifactUri)&&void 0!==e?e:void 0});case h.N3.TRACES:if((0,_t.oX)())return(0,H.Y)(qi,{runUuid:r,runTags:R,experimentId:o})}return(0,H.Y)(wi,{runInfo:S,tags:R,params:I,latestMetrics:b,runUuid:r,onRunDataUpdated:C,datasets:T})})()})]}),(0,H.Y)(m.jP,{runUuid:r,onClose:()=>x(!1),runName:null!==(t=S.runName)&&void 0!==t?t:"",isOpen:y,onSuccess:C}),(0,H.Y)(Si.A,{selectedRunIds:[r],onClose:()=>w(!1),isOpen:Y,onSuccess:()=>{g(bt.h.getExperimentPageRoute(o))}})]}):(0,H.Y)(Xi,{})};var $i=Ji},87665:function(e,t,r){r.d(t,{QN:function(){return u},F3:function(){return h},xH:function(){return m},BE:function(){return p}});var i=r(31014),n=r(38812),s=r(64596),a=r(88443),o=r(50111);const{Option:l,OptGroup:d}=n._vn,c="Create New Model",u=`$$$__${c}__$$$`,p="selectedModel",h="modelName";class m extends i.Component{constructor(){super(...arguments),this.state={selectedModel:null},this.handleModelSelectChange=e=>{this.setState({selectedModel:e})},this.modelNameValidator=(e,t,r)=>{const{modelByName:i}=this.props;r(i[t]?`Model "${t}" already exists.`:void 0)},this.handleFilterOption=(e,t)=>-1!==(t&&t.value||"").toLowerCase().indexOf(e.toLowerCase())}renderExplanatoryText(){const{isCopy:e}=this.props,{selectedModel:t}=this.state;if(!t||t===u)return null;const r=e?(0,o.Y)(a.A,{id:"hxMEqi",defaultMessage:"The model version will be copied to {selectedModel} as a new version.",values:{selectedModel:t}}):(0,o.Y)(a.A,{id:"zjXq2X",defaultMessage:"The model will be registered as a new version of {selectedModel}.",values:{selectedModel:t}});return(0,o.Y)("p",{className:"modal-explanatory-text",children:r})}renderModel(e){return(0,o.Y)(l,{value:e.name,children:e.name},e.name)}render(){const{modelByName:e,innerRef:t,isCopy:r}=this.props,{selectedModel:i}=this.state,a=i===u;return(0,o.FD)(n.lVW,{ref:t,layout:"vertical",className:"register-model-form",children:[(0,o.Y)(n.lVW.Item,{label:r?(0,o.Y)("b",{children:"Copy to model"}):"Model",name:p,rules:[{required:!0,message:"Please select a model or create a new one."}],children:(0,o.FD)(n._vn,{dropdownClassName:"model-select-dropdown",onChange:this.handleModelSelectChange,placeholder:"Select a model",filterOption:this.handleFilterOption,onSearch:this.props.onSearchRegisteredModels,showSearch:!0,children:[(0,o.FD)(l,{value:u,className:"create-new-model-option",children:[(0,o.Y)("i",{className:"fa fa-plus fa-fw",style:{fontSize:13}})," ",c]}),(0,o.Y)(d,{label:"Models",children:Object.values(e).map((e=>this.renderModel(e)))})]})}),a?(0,o.Y)(n.lVW.Item,{label:"Model Name",name:h,rules:[{required:!0,message:"Please input a name for the new model."},{validator:this.modelNameValidator}],children:(0,o.Y)(s.I,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodelform.tsx_132",placeholder:"Input a model name"})}):null,this.renderExplanatoryText()]})}}},92516:function(e,t,r){r.d(t,{i:function(){return y}});var i=r(31014),n=r(98883),s=r(6928),a=r(47664);var o=r(88443),l=r(64912),d=r(38812),c=r(50111);const{Column:u}=s.A,{Text:p}=n.p,h=2;function m(e,t){const{type:r}=e,i=" ".repeat(t*h);if("object"===r){return`${i}{\n${Object.keys(e.properties).map((r=>{const i=e.properties[r],n=i.required?"":" (optional)",s=m(i,t+1),a=(t+1)*h;return`${" ".repeat(a)}${r}: ${s.slice(a)+n}`})).join(",\n")}\n${i}}`}if("array"===r){const r=t*h;return`${i}Array(${m(e.items,t).slice(r)})`}return`${i}${r}`}function g(e){let t=!0;void 0!==e.required?({required:t}=e):void 0!==e.optional&&e.optional&&(t=!1);const r=t?(0,c.Y)(p,{bold:!0,children:"(required)"}):(0,c.Y)(p,{color:"secondary",children:"(optional)"}),i="name"in e?e.name:"-";return(0,c.FD)(p,{children:[i," ",r]})}function f(e){const t="tensor"===e.type?`Tensor (dtype: ${(r=e)["tensor-spec"].dtype}, shape: [${r["tensor-spec"].shape}])`:m(e,0);var r;return(0,c.Y)("pre",{css:w,children:t})}class v extends i.PureComponent{constructor(){super(...arguments),this.renderSchemaTable=(e,t)=>(0,c.Y)(s.A,{className:"inner-table",size:"middle",showHeader:!1,pagination:!1,locale:{emptyText:`No schema ${t}.`},dataSource:this.getSchemaRowData(e),columns:[{title:"Name",dataIndex:"name",key:"name",width:"40%"},{title:"Type",dataIndex:"type",key:"type",width:"60%"}],scroll:{y:240}}),this.getSchemaRowData=e=>{const t=[];return e.forEach(((e,r)=>{t[r]={key:r,name:g(e),type:f(e)}})),t},this.renderSectionHeader=e=>(0,c.Y)("strong",{className:"primary-text",children:e})}render(){const{schema:e}=this.props,t=e.inputs.length||e.outputs.length?[{key:"1",name:this.props.intl.formatMessage({id:"sxlGRc",defaultMessage:"Inputs ({numInputs})"},{numInputs:e.inputs.length}),type:"",table:this.renderSchemaTable(e.inputs,"inputs")},{key:"2",name:this.props.intl.formatMessage({id:"llVQ2r",defaultMessage:"Outputs ({numOutputs})"},{numOutputs:e.outputs.length}),type:"",table:this.renderSchemaTable(e.outputs,"outputs")}]:[],{theme:r}=this.props.designSystemThemeApi;return(0,c.Y)("div",{css:Y(r),children:(0,c.FD)(s.A,{className:"outer-table",rowClassName:"section-header-row",size:"middle",pagination:!1,defaultExpandAllRows:this.props.defaultExpandAllRows,expandRowByClick:!0,expandedRowRender:e=>e.table,expandIcon:e=>{let{expanded:t,onExpand:r,record:i}=e;return t?(0,c.Y)("span",{onClick:e=>r(i,e),children:(0,c.Y)(d.pgH,{})}):(0,c.Y)("span",{onClick:e=>r(i,e),children:(0,c.Y)(d.Xeq,{})})},locale:{emptyText:(0,c.Y)("div",{children:(0,c.Y)(o.A,{id:"Wd8Tga",defaultMessage:"No schema. See <link>MLflow docs</link> for how to include input and output schema with your model.",values:{link:e=>(0,c.Y)("a",{href:a.zR,target:"_blank",rel:"noreferrer",children:e})}})})},dataSource:t,scroll:{x:240},children:[(0,c.Y)(u,{title:this.props.intl.formatMessage({id:"Nj6Ez5",defaultMessage:"Name"}),width:"40%",dataIndex:"name",render:this.renderSectionHeader},1),(0,c.Y)(u,{title:this.props.intl.formatMessage({id:"2f2qeb",defaultMessage:"Type"}),width:"60%",dataIndex:"type",render:this.renderSectionHeader},2)]},"schema-table")})}}const y=(0,l.Ay)((0,n.$)(v)),x=".ant-table-middle>.ant-table-content>.ant-table-scroll>.ant-table-body>table",Y=e=>({[`${x}>.ant-table-thead>tr>th.ant-table-expand-icon-th`]:{padding:"12px 0",width:"32px"},[`${x}>.ant-table-thead>tr>th.ant-table-row-cell-break-word`]:{padding:"12px 0"},[`${x}>.ant-table-tbody>tr>td.ant-table-row-cell-break-word`]:{padding:"12px 0"},[`${x}>.ant-table-tbody>tr.section-header-row>td.ant-table-row-cell-break-word`]:{padding:"0",width:"32px"},[`${x}>.ant-table-tbody>tr.section-header-row>td.ant-table-row-expand-icon-cell`]:{padding:"0"},".outer-table .ant-table-body":{overflowX:"auto !important",overflowY:"hidden"},".inner-table .ant-table-body":{overflowY:"auto !important"},".inner-table":{maxWidth:800},".outer-table":{maxWidth:800},".section-header-row":{lineHeight:"32px",cursor:"pointer"},".ant-table-tbody>tr>td":{borderColor:e.colors.borderDecorative},".ant-table-thead>tr>th":{backgroundColor:e.colors.backgroundSecondary,color:e.colors.textPrimary,borderColor:e.colors.borderDecorative},".ant-table-tbody>tr.ant-table-row:hover td":{backgroundColor:e.colors.backgroundSecondary},".ant-table-cell":{backgroundColor:e.colors.backgroundPrimary,color:e.colors.textPrimary}}),w=e=>({whiteSpace:"pre-wrap",padding:e.spacing.sm,marginTop:e.spacing.sm,marginBottom:e.spacing.sm})},59508:function(e,t,r){r.d(t,{_C:function(){return o},pc:function(){return s},so:function(){return a}});var i=r(81866),n=r(69708);function s(e){return e?`${i.Qs} ilike ${(0,n.GP)(e,!0)}`:""}function a(){let{query:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[],r=e.includes("tags.")?e:s(e);return r&&t.push(r),t.join(" AND ")}function o(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?s(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}}}]);
//# sourceMappingURL=537.ad4bf31a.chunk.js.map